{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/mpp-export.tsx"],"sourcesContent":["import type { Project } from \"./types\"\n\nexport async function exportToMPP(project: Project): Promise<string> {\n  try {\n    // Save with .xml so users know to import via Microsoft Project's XML option\n    const fileName = `${(project.name || \"Project\").replace(/\\s+/g, \"-\")}.xml`\n\n    const xml = generateMPPXML(project)\n\n    if (!xml || xml.trim().length === 0) {\n      throw new Error(\"Generated XML is empty\")\n    }\n\n    const blob = new Blob([xml], {\n      type: \"application/xml;charset=utf-8\"\n    })\n\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.download = fileName\n    document.body.appendChild(a)\n    a.click()\n    document.body.removeChild(a)\n    URL.revokeObjectURL(url)\n\n    return `Downloaded as XML. Open it with Microsoft Project via File > Open (choose XML format if prompted).`\n  } catch (error) {\n    console.error(\"Error exporting MPP:\", error)\n    throw new Error(`Failed to export file: ${error instanceof Error ? error.message : \"Unknown error\"}`)\n  }\n}\n\nexport async function exportToXML(project: Project) {\n  // Create XML structure for Microsoft Project 2013 (XML format)\n  const xml = generateMPPXML(project)\n\n  // Create and download file with .xml extension\n  // Use text/plain to ensure it's saved as plain text XML\n  // MS Project will recognize it when opened with \"XML Format\" file type\n  const blob = new Blob([xml], { type: \"text/xml\" })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement(\"a\")\n  a.href = url\n  a.download = `${project.name.replace(/\\s+/g, \"-\")}.xml`\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n  URL.revokeObjectURL(url)\n}\n\nfunction formatDateForMSProject(dateString: string): string {\n  // Convert date string to MS Project format (YYYY-MM-DDTHH:MM:SS)\n  // MS Project expects dates with time set to 08:00:00 for start of day\n  if (!dateString || typeof dateString !== \"string\") {\n    // Return current date if invalid\n    const now = new Date()\n    const year = now.getFullYear()\n    const month = String(now.getMonth() + 1).padStart(2, \"0\")\n    const day = String(now.getDate()).padStart(2, \"0\")\n    return `${year}-${month}-${day}T08:00:00`\n  }\n  const date = new Date(dateString)\n  if (isNaN(date.getTime())) {\n    // Return current date if invalid\n    const now = new Date()\n    const year = now.getFullYear()\n    const month = String(now.getMonth() + 1).padStart(2, \"0\")\n    const day = String(now.getDate()).padStart(2, \"0\")\n    return `${year}-${month}-${day}T08:00:00`\n  }\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, \"0\")\n  const day = String(date.getDate()).padStart(2, \"0\")\n  return `${year}-${month}-${day}T08:00:00`\n}\n\nfunction formatDateISO(dateString: string): string {\n  // Format date for ISO fields like CreationDate - MS Project doesn't accept \"Z\" timezone\n  // Format: YYYY-MM-DDTHH:MM:SS (no timezone, no milliseconds)\n  const date = new Date(dateString)\n  if (isNaN(date.getTime())) {\n    const now = new Date()\n    const year = now.getFullYear()\n    const month = String(now.getMonth() + 1).padStart(2, \"0\")\n    const day = String(now.getDate()).padStart(2, \"0\")\n    const hours = String(now.getHours()).padStart(2, \"0\")\n    const minutes = String(now.getMinutes()).padStart(2, \"0\")\n    const seconds = String(now.getSeconds()).padStart(2, \"0\")\n    return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}`\n  }\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, \"0\")\n  const day = String(date.getDate()).padStart(2, \"0\")\n  const hours = String(date.getHours()).padStart(2, \"0\")\n  const minutes = String(date.getMinutes()).padStart(2, \"0\")\n  const seconds = String(date.getSeconds()).padStart(2, \"0\")\n  return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}`\n}\n\nfunction formatDateOnly(dateString: string): string {\n  // Format date without time for fields like FYStartDate\n  const date = new Date(dateString)\n  if (isNaN(date.getTime())) {\n    const now = new Date()\n    return `${now.getFullYear()}-01-01T00:00:00`\n  }\n  const year = date.getFullYear()\n  return `${year}-01-01T00:00:00`\n}\n\nfunction formatDuration(days: number): string {\n  // Convert days to MS Project duration format (PT#H0M0S)\n  // Ensure minimum 1 hour to avoid invalid durations\n  const hours = Math.max(1, Math.round(days * 8)) // Assuming 8 hours per day\n  return `PT${hours}H0M0S`\n}\n\nfunction formatRate(rate: number): string {\n  // Format rate for MS Project (rate per hour)\n  // MS Project expects format like \"100.00\" for $100/hour\n  return rate.toFixed(2)\n}\n\nfunction generateMPPXML(project: Project): string {\n  // Validate and prepare project data\n  const projectName = (project.name || \"Project\").trim()\n  if (!projectName) {\n    throw new Error(\"Project name is required\")\n  }\n\n  // Ensure we have valid start date\n  let projectStartDate: Date\n  try {\n    projectStartDate = new Date(project.startDate)\n    if (isNaN(projectStartDate.getTime())) {\n      projectStartDate = new Date()\n    }\n  } catch {\n    projectStartDate = new Date()\n  }\n\n  // Create task UID mapping for dependencies\n  const taskUidMap = new Map<string, number>()\n  project.tasks.forEach((task, index) => {\n    taskUidMap.set(task.id, index + 1)\n  })\n\n  // Create resource UID mapping\n  const resourceUidMap = new Map<string, number>()\n  project.resources.forEach((resource, index) => {\n    resourceUidMap.set(resource.id, index + 1)\n  })\n\n  // Create resource name to UID mapping\n  const resourceNameToUid = new Map<string, number>()\n  project.resources.forEach((resource, index) => {\n    if (resource.name) {\n      resourceNameToUid.set(resource.name.trim(), index + 1)\n    }\n  })\n\n  // Define current date for use in tasks (use local time, no timezone)\n  const now = new Date()\n  const currentDate = formatDateISO(now.toISOString())\n\n  const tasks = project.tasks\n    .map((task, index) => {\n      const uid = index + 1\n\n      // Validate and format dates\n      let taskStartDate: Date\n      let taskEndDate: Date\n      try {\n        taskStartDate = new Date(task.startDate)\n        if (isNaN(taskStartDate.getTime())) {\n          taskStartDate = new Date(projectStartDate)\n          taskStartDate.setDate(taskStartDate.getDate() + index)\n        }\n      } catch {\n        taskStartDate = new Date(projectStartDate)\n        taskStartDate.setDate(taskStartDate.getDate() + index)\n      }\n\n      try {\n        taskEndDate = new Date(task.endDate)\n        if (isNaN(taskEndDate.getTime()) || taskEndDate < taskStartDate) {\n          taskEndDate = new Date(taskStartDate)\n          taskEndDate.setDate(taskEndDate.getDate() + (task.duration || 1))\n        }\n      } catch {\n        taskEndDate = new Date(taskStartDate)\n        taskEndDate.setDate(taskEndDate.getDate() + (task.duration || 1))\n      }\n\n      const startDate = formatDateForMSProject(taskStartDate.toISOString())\n      const finishDate = formatDateForMSProject(taskEndDate.toISOString())\n\n      // Calculate duration in days\n      const daysDiff = Math.max(1, Math.ceil((taskEndDate.getTime() - taskStartDate.getTime()) / (1000 * 60 * 60 * 24)))\n      const duration = formatDuration(daysDiff)\n\n      // Build predecessors string if dependencies exist\n      // MS Project supports multiple predecessors - include ALL dependencies\n      let predecessors = \"\"\n      if (task.dependencies && task.dependencies.length > 0) {\n        const predUids = task.dependencies\n          .map((depId) => {\n            const predUid = taskUidMap.get(depId)\n            return predUid ? predUid.toString() : null\n          })\n          .filter((uid) => uid !== null)\n\n        // Create PredecessorLink for each dependency\n        if (predUids.length > 0) {\n          predecessors = predUids.map((predUid) => `\n      <PredecessorLink>\n        <PredecessorUID>${predUid}</PredecessorUID>\n        <Type>1</Type>\n        <CrossProject>0</CrossProject>\n      </PredecessorLink>`).join(\"\")\n        }\n      }\n\n      const taskName = (task.name || `Task ${uid}`).trim()\n      // Ensure WBS code is always present - generate if missing\n      let wbsCode = (task.wbsCode || \"\").trim()\n      if (!wbsCode) {\n        // Generate WBS code based on task level and position\n        const levelTasks = project.tasks.filter(t => t.level === task.level)\n        const taskIndex = levelTasks.findIndex(t => t.id === task.id)\n        if (task.parentId) {\n          const parent = project.tasks.find(t => t.id === task.parentId)\n          const parentWBS = parent?.wbsCode || \"\"\n          const siblings = project.tasks.filter(t => t.parentId === task.parentId)\n          const siblingIndex = siblings.findIndex(t => t.id === task.id)\n          wbsCode = parentWBS ? `${parentWBS}.${siblingIndex + 1}` : `${task.level}.${siblingIndex + 1}`\n        } else {\n          wbsCode = `${taskIndex + 1}`\n        }\n      }\n      const outlineLevel = Math.max(1, Math.min(10, task.level || 1))\n      const taskCost = typeof task.cost === \"number\" && !isNaN(task.cost) && task.cost >= 0 ? task.cost : 0\n      const isSummary = !task.parentId && project.tasks.some(t => t.parentId === task.id)\n\n      return `\n    <Task>\n      <UID>${uid}</UID>\n      <ID>${uid}</ID>\n      <Name>${escapeXML(taskName)}</Name>\n      <Type>0</Type>\n      <IsNull>0</IsNull>\n      <CreateDate>${startDate}</CreateDate>\n      <Contact></Contact>\n      <WBS>${escapeXML(wbsCode)}</WBS>\n      <OutlineNumber>${escapeXML(wbsCode)}</OutlineNumber>\n      <OutlineLevel>${outlineLevel}</OutlineLevel>\n      <Priority>500</Priority>\n      <Start>${startDate}</Start>\n      <Finish>${finishDate}</Finish>\n      <Duration>${duration}</Duration>\n      <DurationFormat>7</DurationFormat>\n      <Work>${duration}</Work>\n      <Stop>${finishDate}</Stop>\n      <Resume>${startDate}</Resume>\n      <Cost>${taskCost.toFixed(2)}</Cost>\n      <FixedCost>0.00</FixedCost>\n      <FixedCostAccrual>3</FixedCostAccrual>\n      <PercentComplete>0</PercentComplete>\n      <PercentWorkComplete>0</PercentWorkComplete>\n      <BCWS>0.00</BCWS>\n      <BCWP>0.00</BCWP>\n      <ACWP>0.00</ACWP>\n      <SV>0.00</SV>\n      <CV>0.00</CV>\n      <EAC>0.00</EAC>\n      <VAC>0.00</VAC>\n      <TCPI>0.00</TCPI>\n      <Critical>${task.isCriticalPath ? 1 : 0}</Critical>\n      <Milestone>0</Milestone>\n      <Summary>${isSummary ? 1 : 0}</Summary>\n      <Active>1</Active>\n      <Manual>0</Manual>\n      <LevelingDelay>0</LevelingDelay>\n      <LevelingCanSplit>1</LevelingCanSplit>\n      ${predecessors}\n      ${task.resource ? `<ResourceNames>${escapeXML(task.resource.trim())}</ResourceNames>` : \"\"}\n    </Task>`\n    })\n    .join(\"\\n\")\n\n  const resources = project.resources\n    .map(\n      (resource, index) => {\n        const resourceName = resource.name || `Resource ${index + 1}`\n        const resourceRate = typeof resource.rate === \"number\" && !isNaN(resource.rate) ? resource.rate : 0\n        const initials = resourceName.substring(0, Math.min(3, resourceName.length)).toUpperCase() || \"RES\"\n        return `\n    <Resource>\n      <UID>${index + 1}</UID>\n      <ID>${index + 1}</ID>\n      <Name>${escapeXML(resourceName)}</Name>\n      <Type>1</Type>\n      <IsNull>0</IsNull>\n      <Initials>${escapeXML(initials)}</Initials>\n      <StandardRate Format=\"2\">${formatRate(resourceRate)}</StandardRate>\n      <OvertimeRate Format=\"2\">${formatRate(resourceRate * 1.5)}</OvertimeRate>\n      <CostPerUse>0</CostPerUse>\n      <AccrueAt>3</AccrueAt>\n      <BaseCalendarUID>1</BaseCalendarUID>\n      <MaxUnits>1</MaxUnits>\n      <PeakUnits>1</PeakUnits>\n    </Resource>`\n      }\n    )\n    .join(\"\\n\")\n\n  // Build assignments section\n  let assignmentUID = 1\n  const assignments = project.tasks\n    .map((task, taskIndex) => {\n      if (!task.resource) return \"\"\n      const resourceName = task.resource.trim()\n      const resourceUid = resourceNameToUid.get(resourceName)\n      if (!resourceUid) return \"\"\n\n      const taskUID = taskIndex + 1\n\n      // Use same dates as task\n      let taskStartDate: Date\n      let taskEndDate: Date\n      try {\n        taskStartDate = new Date(task.startDate)\n        if (isNaN(taskStartDate.getTime())) {\n          taskStartDate = new Date(projectStartDate)\n          taskStartDate.setDate(taskStartDate.getDate() + taskIndex)\n        }\n      } catch {\n        taskStartDate = new Date(projectStartDate)\n        taskStartDate.setDate(taskStartDate.getDate() + taskIndex)\n      }\n\n      try {\n        taskEndDate = new Date(task.endDate)\n        if (isNaN(taskEndDate.getTime()) || taskEndDate < taskStartDate) {\n          taskEndDate = new Date(taskStartDate)\n          taskEndDate.setDate(taskEndDate.getDate() + (task.duration || 1))\n        }\n      } catch {\n        taskEndDate = new Date(taskStartDate)\n        taskEndDate.setDate(taskEndDate.getDate() + (task.duration || 1))\n      }\n\n      const startDate = formatDateForMSProject(taskStartDate.toISOString())\n      const finishDate = formatDateForMSProject(taskEndDate.toISOString())\n      const daysDiff = Math.max(1, Math.ceil((taskEndDate.getTime() - taskStartDate.getTime()) / (1000 * 60 * 60 * 24)))\n      const duration = formatDuration(daysDiff)\n\n      const assignmentCost = typeof task.cost === \"number\" && !isNaN(task.cost) && task.cost >= 0 ? task.cost : 0\n      const uid = assignmentUID++\n\n      return `\n    <Assignment>\n      <UID>${uid}</UID>\n      <TaskUID>${taskUID}</TaskUID>\n      <ResourceUID>${resourceUid}</ResourceUID>\n      <PercentWorkComplete>0</PercentWorkComplete>\n      <ActualWork>PT0H0M0S</ActualWork>\n      <Work>${duration}</Work>\n      <RegularWork>${duration}</RegularWork>\n      <RemainingWork>${duration}</RemainingWork>\n      <Start>${startDate}</Start>\n      <Finish>${finishDate}</Finish>\n      <Cost>${assignmentCost.toFixed(2)}</Cost>\n      <Units>1</Units>\n    </Assignment>`\n    })\n    .filter((a) => a !== \"\")\n    .join(\"\\n\")\n\n  const projectStartDateFormatted = formatDateForMSProject(projectStartDate.toISOString())\n\n  // Calculate project finish date from tasks\n  let projectFinishDate = projectStartDate\n  if (project.tasks.length > 0) {\n    project.tasks.forEach((task) => {\n      try {\n        const taskFinish = new Date(task.endDate)\n        if (!isNaN(taskFinish.getTime()) && taskFinish > projectFinishDate) {\n          projectFinishDate = taskFinish\n        }\n      } catch {\n        // Ignore invalid dates\n      }\n    })\n  }\n  // Ensure finish date is at least start date\n  if (projectFinishDate < projectStartDate) {\n    projectFinishDate = new Date(projectStartDate)\n    projectFinishDate.setDate(projectFinishDate.getDate() + 1)\n  }\n  const projectFinishDateFormatted = formatDateForMSProject(projectFinishDate.toISOString())\n\n  const fyStartDate = formatDateOnly(projectStartDate.toISOString())\n\n  // Ensure we have at least one task or resource for valid XML\n  const hasTasks = project.tasks && project.tasks.length > 0\n  const hasResources = project.resources && project.resources.length > 0\n\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<Project xmlns=\"http://schemas.microsoft.com/project\">\n  <SaveVersion>12</SaveVersion>\n  <Name>${escapeXML(projectName)}</Name>\n  <Title>${escapeXML(projectName)}</Title>\n  <Author>AI Project Planner</Author>\n  <Company></Company>\n  <Manager></Manager>\n  <CreationDate>${currentDate}</CreationDate>\n  <LastSaved>${currentDate}</LastSaved>\n  <ScheduleFromStart>1</ScheduleFromStart>\n  <StartDate>${projectStartDateFormatted}</StartDate>\n  <FinishDate>${projectFinishDateFormatted}</FinishDate>\n  <FYStartDate>${fyStartDate}</FYStartDate>\n  <CriticalSlackLimit>0</CriticalSlackLimit>\n  <CurrencyDigits>2</CurrencyDigits>\n  <CurrencySymbol>$</CurrencySymbol>\n  <CurrencySymbolPosition>0</CurrencySymbolPosition>\n  <CalendarUID>1</CalendarUID>\n  <DefaultStartTime>08:00:00</DefaultStartTime>\n  <DefaultFinishTime>17:00:00</DefaultFinishTime>\n  <MinutesPerDay>480</MinutesPerDay>\n  <MinutesPerWeek>2400</MinutesPerWeek>\n  <DaysPerMonth>20</DaysPerMonth>\n  <DefaultTaskType>0</DefaultTaskType>\n  <DefaultFixedCostAccrual>3</DefaultFixedCostAccrual>\n  <DurationFormat>7</DurationFormat>\n  <WorkFormat>2</WorkFormat>\n  <EditableActualCosts>0</EditableActualCosts>\n  <HonorConstraints>0</HonorConstraints>\n  <InsertedProjectsLikeSummary>0</InsertedProjectsLikeSummary>\n  <MultipleCriticalPaths>0</MultipleCriticalPaths>\n  <NewTasksEstimated>1</NewTasksEstimated>\n  <NewTasksEffortDriven>1</NewTasksEffortDriven>\n  <NewTasksAreManual>0</NewTasksAreManual>\n  <SplitsInProgressTasks>0</SplitsInProgressTasks>\n  <SpreadActualCost>0</SpreadActualCost>\n  <SpreadPercentComplete>0</SpreadPercentComplete>\n  <TaskUpdatesResource>1</TaskUpdatesResource>\n  <FiscalYearStart>0</FiscalYearStart>\n  <WeekStartDay>1</WeekStartDay>\n  <MoveCompletedEndsBack>0</MoveCompletedEndsBack>\n  <MoveRemainingStartsBack>0</MoveRemainingStartsBack>\n  <MoveRemainingStartsForward>0</MoveRemainingStartsForward>\n  <MoveCompletedEndsForward>0</MoveCompletedEndsForward>\n  <BaselineForEarnedValue>0</BaselineForEarnedValue>\n  <AutoAddNewResourcesAndTasks>1</AutoAddNewResourcesAndTasks>\n  <StatusDate>${projectStartDateFormatted}</StatusDate>\n  <CurrentDate>${projectStartDateFormatted}</CurrentDate>\n  <Autolink>1</Autolink>\n  <NewTaskStartDate>0</NewTaskStartDate>\n  <DefaultTaskEVMethod>0</DefaultTaskEVMethod>\n  <ProjectExternallyEdited>0</ProjectExternallyEdited>\n  <Calendars>\n    <Calendar>\n      <UID>1</UID>\n      <Name>Standard</Name>\n      <IsBaseCalendar>1</IsBaseCalendar>\n      <WeekDays>\n        <WeekDay>\n          <DayType>1</DayType>\n          <DayWorking>1</DayWorking>\n          <TimePeriod>\n            <FromDate>1900-01-01T08:00:00</FromDate>\n            <ToDate>1900-01-01T17:00:00</ToDate>\n          </TimePeriod>\n        </WeekDay>\n        <WeekDay>\n          <DayType>2</DayType>\n          <DayWorking>1</DayWorking>\n          <TimePeriod>\n            <FromDate>1900-01-01T08:00:00</FromDate>\n            <ToDate>1900-01-01T17:00:00</ToDate>\n          </TimePeriod>\n        </WeekDay>\n        <WeekDay>\n          <DayType>3</DayType>\n          <DayWorking>1</DayWorking>\n          <TimePeriod>\n            <FromDate>1900-01-01T08:00:00</FromDate>\n            <ToDate>1900-01-01T17:00:00</ToDate>\n          </TimePeriod>\n        </WeekDay>\n        <WeekDay>\n          <DayType>4</DayType>\n          <DayWorking>1</DayWorking>\n          <TimePeriod>\n            <FromDate>1900-01-01T08:00:00</FromDate>\n            <ToDate>1900-01-01T17:00:00</ToDate>\n          </TimePeriod>\n        </WeekDay>\n        <WeekDay>\n          <DayType>5</DayType>\n          <DayWorking>1</DayWorking>\n          <TimePeriod>\n            <FromDate>1900-01-01T08:00:00</FromDate>\n            <ToDate>1900-01-01T17:00:00</ToDate>\n          </TimePeriod>\n        </WeekDay>\n        <WeekDay>\n          <DayType>6</DayType>\n          <DayWorking>0</DayWorking>\n        </WeekDay>\n        <WeekDay>\n          <DayType>7</DayType>\n          <DayWorking>0</DayWorking>\n        </WeekDay>\n      </WeekDays>\n    </Calendar>\n  </Calendars>\n  <Tasks>\n${tasks}\n  </Tasks>\n  <Resources>\n${resources}\n  </Resources>\n  <Assignments>\n${assignments}\n  </Assignments>\n</Project>`\n}\n\nfunction escapeXML(str: string): string {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&apos;\")\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/constants.ts"],"sourcesContent":["export const PROJECT_TYPES = [\n  { value: \"mobile-app\", label: \"Mobile App\" },\n  { value: \"e-commerce\", label: \"E-Commerce Platform\" },\n  { value: \"saas-platform\", label: \"SaaS Dashboard\" },\n  { value: \"crm-system\", label: \"CRM System\" },\n  { value: \"booking-app\", label: \"Booking App\" },\n  { value: \"hospital-system\", label: \"Hospital System\" },\n  { value: \"school-system\", label: \"School System\" },\n  { value: \"custom\", label: \"Custom Project\" },\n] as const\n\nexport const RESOURCE_ROLES = [\n  \"Project Manager\",\n  \"Frontend Developer\",\n  \"Backend Developer\",\n  \"AI Engineer\",\n  \"Database Engineer\",\n  \"QA Engineer\",\n  \"DevOps Engineer\",\n  \"UI/UX Designer\",\n] as const\n\nexport const RESOURCE_RATES: Record<string, number> = {\n  \"Project Manager\": 150,\n  \"Frontend Developer\": 120,\n  \"Backend Developer\": 130,\n  \"AI Engineer\": 150,\n  \"Database Engineer\": 125,\n  \"QA Engineer\": 90,\n  \"DevOps Engineer\": 135,\n  \"UI/UX Designer\": 110,\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,gBAAgB;IAC3B;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAc,OAAO;IAAsB;IACpD;QAAE,OAAO;QAAiB,OAAO;IAAiB;IAClD;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAe,OAAO;IAAc;IAC7C;QAAE,OAAO;QAAmB,OAAO;IAAkB;IACrD;QAAE,OAAO;QAAiB,OAAO;IAAgB;IACjD;QAAE,OAAO;QAAU,OAAO;IAAiB;CAC5C;AAEM,MAAM,iBAAiB;IAC5B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,iBAAyC;IACpD,mBAAmB;IACnB,sBAAsB;IACtB,qBAAqB;IACrB,eAAe;IACf,qBAAqB;IACrB,eAAe;IACf,mBAAmB;IACnB,kBAAkB;AACpB"}},
    {"offset": {"line": 736, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/ai-generator.ts"],"sourcesContent":["import type { Task, Resource, ProjectType } from \"./types\"\nimport { RESOURCE_RATES } from \"./constants\"\n\ninterface WBSTemplate {\n  phases: Array<{\n    name: string\n    tasks: Array<{\n      name: string\n      duration: number\n      resource: string\n      dependencies?: number[]\n      subtasks?: Array<{\n        name: string\n        duration: number\n        resource: string\n        dependencies?: number[]\n      }>\n    }>\n  }>\n}\n\nconst templates: Record<ProjectType, WBSTemplate> = {\n  \"mobile-app\": {\n    phases: [\n      {\n        name: \"1. Project Planning & Initiation\",\n        tasks: [\n          {\n            name: \"1.1 Project Kickoff & Setup\",\n            duration: 3,\n            resource: \"Project Manager\",\n            subtasks: [\n              { name: \"Stakeholder Meeting\", duration: 1, resource: \"Project Manager\" },\n              { name: \"Project Charter Creation\", duration: 1, resource: \"Project Manager\" },\n              { name: \"Team Assembly\", duration: 1, resource: \"Project Manager\" },\n            ],\n          },\n          {\n            name: \"1.2 Requirements Gathering & Analysis\",\n            duration: 8,\n            resource: \"Project Manager\",\n            subtasks: [\n              { name: \"User Requirements Collection\", duration: 3, resource: \"Project Manager\" },\n              { name: \"Business Requirements Analysis\", duration: 2, resource: \"Project Manager\" },\n              { name: \"Requirements Documentation\", duration: 2, resource: \"Project Manager\" },\n              { name: \"Requirements Review & Approval\", duration: 1, resource: \"Project Manager\" },\n            ],\n          },\n          {\n            name: \"1.3 Technical Architecture Design\",\n            duration: 10,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"System Architecture Design\", duration: 4, resource: \"Backend Developer\" },\n              { name: \"Technology Stack Selection\", duration: 2, resource: \"Backend Developer\" },\n              { name: \"API Design & Documentation\", duration: 3, resource: \"Backend Developer\" },\n              { name: \"Architecture Review\", duration: 1, resource: \"Backend Developer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"2. Design Phase\",\n        tasks: [\n          {\n            name: \"2.1 UI/UX Design\",\n            duration: 15,\n            resource: \"UI/UX Designer\",\n            subtasks: [\n              { name: \"User Research & Personas\", duration: 3, resource: \"UI/UX Designer\" },\n              { name: \"Wireframing\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Visual Design\", duration: 5, resource: \"UI/UX Designer\" },\n              { name: \"Design Review & Iteration\", duration: 3, resource: \"UI/UX Designer\" },\n            ],\n          },\n          {\n            name: \"2.2 Design System Creation\",\n            duration: 8,\n            resource: \"UI/UX Designer\",\n            subtasks: [\n              { name: \"Component Library Design\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Style Guide Development\", duration: 2, resource: \"UI/UX Designer\" },\n              { name: \"Design System Documentation\", duration: 2, resource: \"UI/UX Designer\" },\n            ],\n          },\n          {\n            name: \"2.3 Prototype Development\",\n            duration: 7,\n            resource: \"Frontend Developer\",\n            subtasks: [\n              { name: \"Interactive Prototype Creation\", duration: 4, resource: \"Frontend Developer\" },\n              { name: \"User Testing & Feedback\", duration: 2, resource: \"Frontend Developer\" },\n              { name: \"Prototype Refinement\", duration: 1, resource: \"Frontend Developer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"3. Development Phase\",\n        tasks: [\n          {\n            name: \"3.1 Backend Development\",\n            duration: 35,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"API Endpoint Development\", duration: 15, resource: \"Backend Developer\" },\n              { name: \"Business Logic Implementation\", duration: 12, resource: \"Backend Developer\" },\n              { name: \"API Testing & Documentation\", duration: 5, resource: \"Backend Developer\" },\n              { name: \"Performance Optimization\", duration: 3, resource: \"Backend Developer\" },\n            ],\n          },\n          {\n            name: \"3.2 Database Setup & Management\",\n            duration: 10,\n            resource: \"Database Engineer\",\n            subtasks: [\n              { name: \"Database Schema Design\", duration: 3, resource: \"Database Engineer\" },\n              { name: \"Database Implementation\", duration: 4, resource: \"Database Engineer\" },\n              { name: \"Data Migration Scripts\", duration: 2, resource: \"Database Engineer\" },\n              { name: \"Database Optimization\", duration: 1, resource: \"Database Engineer\" },\n            ],\n          },\n          {\n            name: \"3.3 Frontend Development\",\n            duration: 40,\n            resource: \"Frontend Developer\",\n            subtasks: [\n              { name: \"UI Component Development\", duration: 15, resource: \"Frontend Developer\" },\n              { name: \"State Management Setup\", duration: 5, resource: \"Frontend Developer\" },\n              { name: \"API Integration\", duration: 10, resource: \"Frontend Developer\" },\n              { name: \"Responsive Design Implementation\", duration: 7, resource: \"Frontend Developer\" },\n              { name: \"Frontend Testing\", duration: 3, resource: \"Frontend Developer\" },\n            ],\n          },\n          {\n            name: \"3.4 Authentication & Security\",\n            duration: 12,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"Authentication System Development\", duration: 6, resource: \"Backend Developer\" },\n              { name: \"Authorization Implementation\", duration: 3, resource: \"Backend Developer\" },\n              { name: \"Security Audit & Fixes\", duration: 3, resource: \"Backend Developer\" },\n            ],\n          },\n          {\n            name: \"3.5 AI Features Integration\",\n            duration: 20,\n            resource: \"AI Engineer\",\n            subtasks: [\n              { name: \"AI Model Integration\", duration: 8, resource: \"AI Engineer\" },\n              { name: \"Machine Learning Pipeline\", duration: 7, resource: \"AI Engineer\" },\n              { name: \"AI Feature Testing\", duration: 5, resource: \"AI Engineer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"4. Testing Phase\",\n        tasks: [\n          {\n            name: \"4.1 Unit Testing\",\n            duration: 15,\n            resource: \"QA Engineer\",\n            subtasks: [\n              { name: \"Unit Test Development\", duration: 8, resource: \"QA Engineer\" },\n              { name: \"Code Coverage Analysis\", duration: 3, resource: \"QA Engineer\" },\n              { name: \"Unit Test Execution\", duration: 4, resource: \"QA Engineer\" },\n            ],\n          },\n          {\n            name: \"4.2 Integration Testing\",\n            duration: 12,\n            resource: \"QA Engineer\",\n            subtasks: [\n              { name: \"Integration Test Planning\", duration: 2, resource: \"QA Engineer\" },\n              { name: \"Integration Test Development\", duration: 5, resource: \"QA Engineer\" },\n              { name: \"Integration Test Execution\", duration: 4, resource: \"QA Engineer\" },\n              { name: \"Bug Fixing & Retesting\", duration: 1, resource: \"QA Engineer\" },\n            ],\n          },\n          {\n            name: \"4.3 User Acceptance Testing (UAT)\",\n            duration: 8,\n            resource: \"Project Manager\",\n            subtasks: [\n              { name: \"UAT Planning\", duration: 1, resource: \"Project Manager\" },\n              { name: \"UAT Execution\", duration: 5, resource: \"Project Manager\" },\n              { name: \"UAT Feedback Collection\", duration: 1, resource: \"Project Manager\" },\n              { name: \"Final Adjustments\", duration: 1, resource: \"Project Manager\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"5. Deployment & Launch\",\n        tasks: [\n          {\n            name: \"5.1 CI/CD Setup\",\n            duration: 8,\n            resource: \"DevOps Engineer\",\n            subtasks: [\n              { name: \"CI/CD Pipeline Configuration\", duration: 4, resource: \"DevOps Engineer\" },\n              { name: \"Automated Testing Integration\", duration: 2, resource: \"DevOps Engineer\" },\n              { name: \"Deployment Automation\", duration: 2, resource: \"DevOps Engineer\" },\n            ],\n          },\n          {\n            name: \"5.2 Production Deployment\",\n            duration: 5,\n            resource: \"DevOps Engineer\",\n            subtasks: [\n              { name: \"Production Environment Setup\", duration: 2, resource: \"DevOps Engineer\" },\n              { name: \"Application Deployment\", duration: 2, resource: \"DevOps Engineer\" },\n              { name: \"Deployment Verification\", duration: 1, resource: \"DevOps Engineer\" },\n            ],\n          },\n          {\n            name: \"5.3 Post-Launch Monitoring\",\n            duration: 10,\n            resource: \"DevOps Engineer\",\n            subtasks: [\n              { name: \"Monitoring Setup\", duration: 3, resource: \"DevOps Engineer\" },\n              { name: \"Performance Monitoring\", duration: 4, resource: \"DevOps Engineer\" },\n              { name: \"Issue Resolution\", duration: 3, resource: \"DevOps Engineer\" },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n  \"e-commerce\": {\n    phases: [\n      {\n        name: \"1. Project Planning & Analysis\",\n        tasks: [\n          {\n            name: \"1.1 Project Initiation\",\n            duration: 3,\n            resource: \"Project Manager\",\n            subtasks: [\n              { name: \"Stakeholder Alignment\", duration: 1, resource: \"Project Manager\" },\n              { name: \"Project Charter\", duration: 1, resource: \"Project Manager\" },\n              { name: \"Team Setup\", duration: 1, resource: \"Project Manager\" },\n            ],\n          },\n          {\n            name: \"1.2 Requirements Analysis\",\n            duration: 10,\n            resource: \"Project Manager\",\n            subtasks: [\n              { name: \"Business Requirements\", duration: 4, resource: \"Project Manager\" },\n              { name: \"Functional Requirements\", duration: 3, resource: \"Project Manager\" },\n              { name: \"Non-Functional Requirements\", duration: 2, resource: \"Project Manager\" },\n              { name: \"Requirements Validation\", duration: 1, resource: \"Project Manager\" },\n            ],\n          },\n          {\n            name: \"1.3 Technical Design & Architecture\",\n            duration: 12,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"System Architecture Design\", duration: 5, resource: \"Backend Developer\" },\n              { name: \"Database Schema Design\", duration: 3, resource: \"Backend Developer\" },\n              { name: \"API Design\", duration: 3, resource: \"Backend Developer\" },\n              { name: \"Security Architecture\", duration: 1, resource: \"Backend Developer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"2. Design Phase\",\n        tasks: [\n          {\n            name: \"2.1 UI/UX Design\",\n            duration: 18,\n            resource: \"UI/UX Designer\",\n            subtasks: [\n              { name: \"User Research\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Information Architecture\", duration: 3, resource: \"UI/UX Designer\" },\n              { name: \"Wireframing\", duration: 5, resource: \"UI/UX Designer\" },\n              { name: \"Visual Design\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Design Review\", duration: 2, resource: \"UI/UX Designer\" },\n            ],\n          },\n          {\n            name: \"2.2 Product Pages Design\",\n            duration: 12,\n            resource: \"UI/UX Designer\",\n            subtasks: [\n              { name: \"Product Listing Design\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Product Detail Page Design\", duration: 4, resource: \"UI/UX Designer\" },\n              { name: \"Category Pages Design\", duration: 3, resource: \"UI/UX Designer\" },\n              { name: \"Design Refinement\", duration: 1, resource: \"UI/UX Designer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"3. Development Phase\",\n        tasks: [\n          {\n            name: \"3.1 Database Development\",\n            duration: 10,\n            resource: \"Database Engineer\",\n            subtasks: [\n              { name: \"Database Implementation\", duration: 5, resource: \"Database Engineer\" },\n              { name: \"Data Models Creation\", duration: 3, resource: \"Database Engineer\" },\n              { name: \"Database Optimization\", duration: 2, resource: \"Database Engineer\" },\n            ],\n          },\n          {\n            name: \"3.2 Product Catalog System\",\n            duration: 20,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"Product Management APIs\", duration: 8, resource: \"Backend Developer\" },\n              { name: \"Category Management\", duration: 5, resource: \"Backend Developer\" },\n              { name: \"Search & Filter APIs\", duration: 5, resource: \"Backend Developer\" },\n              { name: \"Catalog Testing\", duration: 2, resource: \"Backend Developer\" },\n            ],\n          },\n          {\n            name: \"3.3 Shopping Cart & Checkout\",\n            duration: 15,\n            resource: \"Frontend Developer\",\n            subtasks: [\n              { name: \"Cart Component Development\", duration: 5, resource: \"Frontend Developer\" },\n              { name: \"Checkout Flow\", duration: 6, resource: \"Frontend Developer\" },\n              { name: \"Order Management UI\", duration: 3, resource: \"Frontend Developer\" },\n              { name: \"Cart Testing\", duration: 1, resource: \"Frontend Developer\" },\n            ],\n          },\n          {\n            name: \"3.4 Payment Gateway Integration\",\n            duration: 15,\n            resource: \"Backend Developer\",\n            subtasks: [\n              { name: \"Payment API Integration\", duration: 8, resource: \"Backend Developer\" },\n              { name: \"Payment Security Implementation\", duration: 4, resource: \"Backend Developer\" },\n              { name: \"Payment Testing\", duration: 3, resource: \"Backend Developer\" },\n            ],\n          },\n          {\n            name: \"3.5 AI Recommendation Engine\",\n            duration: 25,\n            resource: \"AI Engineer\",\n            subtasks: [\n              { name: \"ML Model Development\", duration: 10, resource: \"AI Engineer\" },\n              { name: \"Recommendation Algorithm\", duration: 8, resource: \"AI Engineer\" },\n              { name: \"Integration with Catalog\", duration: 5, resource: \"AI Engineer\" },\n              { name: \"AI Testing & Tuning\", duration: 2, resource: \"AI Engineer\" },\n            ],\n          },\n          {\n            name: \"3.6 Admin Dashboard\",\n            duration: 20,\n            resource: \"Frontend Developer\",\n            subtasks: [\n              { name: \"Dashboard Layout\", duration: 5, resource: \"Frontend Developer\" },\n              { name: \"Product Management UI\", duration: 6, resource: \"Frontend Developer\" },\n              { name: \"Order Management UI\", duration: 5, resource: \"Frontend Developer\" },\n              { name: \"Analytics Dashboard\", duration: 4, resource: \"Frontend Developer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"4. Testing & Quality Assurance\",\n        tasks: [\n          {\n            name: \"4.1 Comprehensive Testing\",\n            duration: 18,\n            resource: \"QA Engineer\",\n            subtasks: [\n              { name: \"Test Planning\", duration: 2, resource: \"QA Engineer\" },\n              { name: \"Functional Testing\", duration: 6, resource: \"QA Engineer\" },\n              { name: \"Integration Testing\", duration: 5, resource: \"QA Engineer\" },\n              { name: \"Performance Testing\", duration: 3, resource: \"QA Engineer\" },\n              { name: \"Security Testing\", duration: 2, resource: \"QA Engineer\" },\n            ],\n          },\n        ],\n      },\n      {\n        name: \"5. Deployment & Launch\",\n        tasks: [\n          {\n            name: \"5.1 Production Deployment\",\n            duration: 8,\n            resource: \"DevOps Engineer\",\n            subtasks: [\n              { name: \"Production Environment Setup\", duration: 3, resource: \"DevOps Engineer\" },\n              { name: \"Application Deployment\", duration: 3, resource: \"DevOps Engineer\" },\n              { name: \"Deployment Verification\", duration: 2, resource: \"DevOps Engineer\" },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n  \"saas-platform\": {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [\n          { name: \"Requirements\", duration: 5, resource: \"Project Manager\" },\n          { name: \"Architecture\", duration: 8, resource: \"Backend Developer\" },\n        ],\n      },\n      {\n        name: \"Design\",\n        tasks: [{ name: \"UI Design\", duration: 12, resource: \"UI/UX Designer\" }],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Backend APIs\", duration: 25, resource: \"Backend Developer\" },\n          { name: \"Frontend Dashboard\", duration: 30, resource: \"Frontend Developer\" },\n          { name: \"Multi-tenancy Setup\", duration: 10, resource: \"Backend Developer\" },\n          { name: \"AI Analytics\", duration: 15, resource: \"AI Engineer\" },\n        ],\n      },\n      {\n        name: \"Launch\",\n        tasks: [\n          { name: \"Testing\", duration: 10, resource: \"QA Engineer\" },\n          { name: \"Deployment\", duration: 5, resource: \"DevOps Engineer\" },\n        ],\n      },\n    ],\n  },\n  \"crm-system\": {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [{ name: \"Requirements\", duration: 5, resource: \"Project Manager\" }],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Database Design\", duration: 8, resource: \"Database Engineer\" },\n          { name: \"Contact Management\", duration: 15, resource: \"Backend Developer\" },\n          { name: \"Sales Pipeline\", duration: 20, resource: \"Frontend Developer\" },\n          { name: \"AI Lead Scoring\", duration: 12, resource: \"AI Engineer\" },\n        ],\n      },\n      {\n        name: \"Testing\",\n        tasks: [{ name: \"QA Testing\", duration: 10, resource: \"QA Engineer\" }],\n      },\n    ],\n  },\n  \"booking-app\": {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [{ name: \"Requirements\", duration: 5, resource: \"Project Manager\" }],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Booking Engine\", duration: 20, resource: \"Backend Developer\" },\n          { name: \"Calendar System\", duration: 15, resource: \"Frontend Developer\" },\n          { name: \"Payment Integration\", duration: 10, resource: \"Backend Developer\" },\n        ],\n      },\n      {\n        name: \"Testing\",\n        tasks: [{ name: \"Testing\", duration: 8, resource: \"QA Engineer\" }],\n      },\n    ],\n  },\n  \"hospital-system\": {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [\n          { name: \"Requirements\", duration: 8, resource: \"Project Manager\" },\n          { name: \"Compliance Review\", duration: 5, resource: \"Project Manager\" },\n        ],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Patient Records\", duration: 20, resource: \"Backend Developer\" },\n          { name: \"Appointment System\", duration: 15, resource: \"Frontend Developer\" },\n          { name: \"AI Diagnosis Assistant\", duration: 25, resource: \"AI Engineer\" },\n        ],\n      },\n      {\n        name: \"Testing\",\n        tasks: [{ name: \"Testing\", duration: 15, resource: \"QA Engineer\" }],\n      },\n    ],\n  },\n  \"school-system\": {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [{ name: \"Requirements\", duration: 5, resource: \"Project Manager\" }],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Student Management\", duration: 18, resource: \"Backend Developer\" },\n          { name: \"Grade Management\", duration: 15, resource: \"Frontend Developer\" },\n          { name: \"Attendance System\", duration: 10, resource: \"Frontend Developer\" },\n        ],\n      },\n      {\n        name: \"Testing\",\n        tasks: [{ name: \"Testing\", duration: 10, resource: \"QA Engineer\" }],\n      },\n    ],\n  },\n  custom: {\n    phases: [\n      {\n        name: \"Planning\",\n        tasks: [{ name: \"Requirements\", duration: 5, resource: \"Project Manager\" }],\n      },\n      {\n        name: \"Development\",\n        tasks: [\n          { name: \"Backend Development\", duration: 20, resource: \"Backend Developer\" },\n          { name: \"Frontend Development\", duration: 20, resource: \"Frontend Developer\" },\n        ],\n      },\n      {\n        name: \"Testing\",\n        tasks: [{ name: \"Testing\", duration: 8, resource: \"QA Engineer\" }],\n      },\n    ],\n  },\n}\n\nexport function generateWBS(type: ProjectType, startDate: Date) {\n  const template = templates[type]\n  const tasks: Task[] = []\n  const resourceMap = new Map<string, Resource>()\n\n  const currentDate = new Date(startDate)\n  let totalCost = 0\n  const taskIdMap = new Map<string, string>() // Map for dependency tracking\n\n  template.phases.forEach((phase, phaseIndex) => {\n    const phaseId = `phase-${phaseIndex}`\n    const phaseStartDate = new Date(currentDate)\n    let phaseDuration = 0\n    let phaseCost = 0\n    const phaseTaskIds: string[] = []\n\n    // Create phase-level task (Level 1)\n    phase.tasks.forEach((task, taskIndex) => {\n      const taskId = `task-${phaseIndex}-${taskIndex}`\n      taskIdMap.set(`${phaseIndex}-${taskIndex}`, taskId)\n\n      let taskStartDate = new Date(currentDate)\n\n      // Handle dependencies - find previous task in same phase or previous phase\n      const dependencies: string[] = []\n      if (task.dependencies && task.dependencies.length > 0) {\n        task.dependencies.forEach((depIndex) => {\n          const depId = taskIdMap.get(`${phaseIndex}-${depIndex}`)\n          if (depId) dependencies.push(depId)\n        })\n      } else if (taskIndex > 0) {\n        // Auto-dependency: depends on previous task in same phase\n        const prevTaskId = taskIdMap.get(`${phaseIndex}-${taskIndex - 1}`)\n        if (prevTaskId) {\n          dependencies.push(prevTaskId)\n          const prevTask = tasks.find(t => t.id === prevTaskId)\n          if (prevTask) {\n            taskStartDate = new Date(prevTask.endDate)\n          }\n        }\n      } else if (phaseIndex > 0 && taskIndex === 0) {\n        // First task of phase depends on last task of previous phase\n        const prevPhaseTasks = tasks.filter(t => t.parentId === `phase-${phaseIndex - 1}`)\n        if (prevPhaseTasks.length > 0) {\n          const lastPrevTask = prevPhaseTasks[prevPhaseTasks.length - 1]\n          dependencies.push(lastPrevTask.id)\n          taskStartDate = new Date(lastPrevTask.endDate)\n        }\n      }\n\n      const taskEndDate = new Date(taskStartDate)\n      taskEndDate.setDate(taskEndDate.getDate() + task.duration)\n\n      const rate = RESOURCE_RATES[task.resource as keyof typeof RESOURCE_RATES] || 100\n      let taskCost = 0 // Will be calculated from subtasks if they exist, otherwise from task duration\n      const subtasks: Task[] = []\n\n      // Create subtasks (Level 3) if they exist\n      if (task.subtasks && task.subtasks.length > 0) {\n        let subtaskStartDate = new Date(taskStartDate)\n\n        task.subtasks.forEach((subtask, subtaskIndex) => {\n          const subtaskId = `subtask-${phaseIndex}-${taskIndex}-${subtaskIndex}`\n          const subtaskEndDate = new Date(subtaskStartDate)\n          subtaskEndDate.setDate(subtaskEndDate.getDate() + subtask.duration)\n\n          const subtaskRate = RESOURCE_RATES[subtask.resource as keyof typeof RESOURCE_RATES] || 100\n          const subtaskCost = subtask.duration * 8 * subtaskRate\n          taskCost += subtaskCost // Accumulate subtask costs\n          totalCost += subtaskCost\n\n          const subtaskDependencies: string[] = []\n          if (subtask.dependencies && subtask.dependencies.length > 0) {\n            subtask.dependencies.forEach((depIndex) => {\n              const depSubtaskId = `subtask-${phaseIndex}-${taskIndex}-${depIndex}`\n              if (tasks.find(t => t.id === depSubtaskId)) {\n                subtaskDependencies.push(depSubtaskId)\n              }\n            })\n          } else if (subtaskIndex > 0) {\n            // Auto-dependency on previous subtask\n            const prevSubtaskId = `subtask-${phaseIndex}-${taskIndex}-${subtaskIndex - 1}`\n            const prevSubtask = tasks.find(t => t.id === prevSubtaskId)\n            if (prevSubtask) {\n              subtaskDependencies.push(prevSubtaskId)\n              subtaskStartDate = new Date(prevSubtask.endDate)\n            }\n          }\n\n          subtasks.push({\n            id: subtaskId,\n            name: subtask.name,\n            wbsCode: `${phaseIndex + 1}.${taskIndex + 1}.${subtaskIndex + 1}`,\n            level: 3,\n            parentId: taskId,\n            duration: subtask.duration,\n            startDate: subtaskStartDate.toISOString(),\n            endDate: subtaskEndDate.toISOString(),\n            resource: subtask.resource,\n            cost: subtaskCost,\n            isCriticalPath: subtaskIndex === 0,\n            dependencies: subtaskDependencies,\n          })\n\n          // Track resources\n          if (!resourceMap.has(subtask.resource)) {\n            resourceMap.set(subtask.resource, {\n              id: crypto.randomUUID(),\n              name: `${subtask.resource} ${resourceMap.size + 1}`,\n              role: subtask.resource,\n              rate: subtaskRate,\n            })\n          }\n\n          subtaskStartDate = new Date(subtaskEndDate)\n        })\n\n        // Update task end date to match last subtask\n        if (subtasks.length > 0) {\n          const lastSubtask = subtasks[subtasks.length - 1]\n          taskEndDate.setTime(new Date(lastSubtask.endDate).getTime())\n        }\n      } else {\n        // No subtasks - calculate cost from main task\n        taskCost = task.duration * 8 * rate\n        totalCost += taskCost\n      }\n\n      phaseCost += taskCost\n\n      // Calculate actual task duration from dates\n      const actualTaskDuration = Math.ceil((taskEndDate.getTime() - taskStartDate.getTime()) / (1000 * 60 * 60 * 24))\n      phaseDuration = Math.max(phaseDuration, Math.ceil((taskEndDate.getTime() - phaseStartDate.getTime()) / (1000 * 60 * 60 * 24)))\n\n      // Create main task (Level 2)\n      const mainTask: Task = {\n        id: taskId,\n        name: task.name,\n        wbsCode: `${phaseIndex + 1}.${taskIndex + 1}`,\n        level: 2,\n        parentId: phaseId,\n        duration: actualTaskDuration, // Use calculated duration\n        startDate: taskStartDate.toISOString(),\n        endDate: taskEndDate.toISOString(),\n        resource: task.resource,\n        cost: taskCost,\n        isCriticalPath: taskIndex === 0 || dependencies.length > 0,\n        dependencies: dependencies,\n      }\n\n      tasks.push(mainTask)\n      phaseTaskIds.push(taskId)\n\n      // Add subtasks\n      if (subtasks.length > 0) {\n        tasks.push(...subtasks)\n      }\n\n      // Track resources\n      if (!resourceMap.has(task.resource)) {\n        resourceMap.set(task.resource, {\n          id: crypto.randomUUID(),\n          name: `${task.resource} ${resourceMap.size + 1}`,\n          role: task.resource,\n          rate,\n        })\n      }\n\n      currentDate.setTime(Math.max(currentDate.getTime(), taskEndDate.getTime()))\n    })\n\n    const phaseEndDate = new Date(currentDate)\n\n    // Create phase summary task (Level 1)\n    tasks.push({\n      id: phaseId,\n      name: phase.name,\n      wbsCode: `${phaseIndex + 1}`,\n      level: 1,\n      parentId: null,\n      duration: phaseDuration,\n      startDate: phaseStartDate.toISOString(),\n      endDate: phaseEndDate.toISOString(),\n      resource: null,\n      cost: phaseCost,\n      isCriticalPath: true,\n      dependencies: phaseIndex > 0 ? [`phase-${phaseIndex - 1}`] : [],\n    })\n  })\n\n  // Calculate critical path based on dependencies\n  const calculateCriticalPath = () => {\n    const earlyStart = new Map<string, number>()\n    const earlyFinish = new Map<string, number>()\n\n    // Forward pass\n    tasks.forEach((task) => {\n      let es = 0\n      if (task.dependencies && task.dependencies.length > 0) {\n        task.dependencies.forEach((depId) => {\n          const depTask = tasks.find(t => t.id === depId)\n          if (depTask) {\n            const depEF = earlyFinish.get(depId) || 0\n            es = Math.max(es, depEF)\n          }\n        })\n      }\n      earlyStart.set(task.id, es)\n      earlyFinish.set(task.id, es + task.duration)\n    })\n\n    const maxFinish = Math.max(...Array.from(earlyFinish.values()))\n    const lateFinish = new Map<string, number>()\n    const lateStart = new Map<string, number>()\n\n    // Backward pass\n    tasks.slice().reverse().forEach((task) => {\n      let lf = maxFinish\n      const dependents = tasks.filter(t => t.dependencies?.includes(task.id))\n      if (dependents.length > 0) {\n        dependents.forEach((dep) => {\n          const depLS = lateStart.get(dep.id) ?? maxFinish\n          lf = Math.min(lf, depLS)\n        })\n      }\n      lateFinish.set(task.id, lf)\n      lateStart.set(task.id, lf - task.duration)\n    })\n\n    // Mark critical path\n    tasks.forEach((task) => {\n      const es = earlyStart.get(task.id) || 0\n      const ef = earlyFinish.get(task.id) || 0\n      const ls = lateStart.get(task.id) || 0\n      const lf = lateFinish.get(task.id) || 0\n      task.isCriticalPath = (es === ls && ef === lf)\n    })\n  }\n\n  calculateCriticalPath()\n\n  const totalDuration = Math.ceil((currentDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24))\n\n  return {\n    tasks,\n    resources: Array.from(resourceMap.values()),\n    duration: totalDuration,\n    budget: totalCost,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2082, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/task-utils.ts"],"sourcesContent":["/**\n * Task Utilities\n * Helper functions for task initialization and migration\n */\n\nimport type { Task } from \"./types\"\n\n/**\n * Initialize a task with all required Planner and Network Diagram fields\n */\nexport function initializeTask(task: Partial<Task>, defaults: {\n  ownerId?: string\n  createdAt?: string\n} = {}): Task {\n  const now = new Date().toISOString()\n\n  return {\n    id: task.id || crypto.randomUUID(),\n    name: task.name || \"Untitled Task\",\n    wbsCode: task.wbsCode || \"1\",\n    level: task.level ?? 1,\n    parentId: task.parentId ?? null,\n    duration: task.duration ?? 1,\n    startDate: task.startDate || now,\n    endDate: task.endDate || now,\n    resource: task.resource ?? null,\n    cost: task.cost ?? 0,\n    isCriticalPath: task.isCriticalPath ?? false,\n    dependencies: task.dependencies || [],\n\n    // Planner fields\n    status: task.status || \"notStarted\",\n    priority: task.priority || \"medium\",\n    assignedTo: task.assignedTo || (task.resource ? [task.resource] : []),\n    dueDate: task.dueDate || task.endDate || null,\n    description: task.description || \"\",\n    checklist: task.checklist || [],\n    labels: task.labels || [],\n    progress: task.progress ?? 0,\n\n    // Network Diagram fields\n    earlyStart: task.earlyStart ?? null,\n    earlyFinish: task.earlyFinish ?? null,\n    lateStart: task.lateStart ?? null,\n    lateFinish: task.lateFinish ?? null,\n    floatDays: task.floatDays ?? null,\n    freeFloatDays: task.freeFloatDays ?? null,\n    predecessors: task.predecessors || task.dependencies || [],\n    successors: task.successors || [],\n\n    // MS Project fields\n    constraintType: task.constraintType || \"asSoonAsPossible\",\n    constraintDate: task.constraintDate,\n    isMilestone: task.isMilestone ?? (task.duration === 0),\n    isSummary: task.isSummary ?? false,\n    work: task.work ?? (task.duration * 8),\n    percentComplete: task.percentComplete ?? 0,\n    actualStart: task.actualStart ?? null,\n    actualFinish: task.actualFinish ?? null,\n    baselineStart: task.baselineStart ?? null,\n    baselineFinish: task.baselineFinish ?? null,\n    baselineDuration: task.baselineDuration ?? null,\n\n    // Collaboration\n    comments: task.comments || [],\n    attachments: task.attachments || [],\n\n    // Metadata\n    createdBy: task.createdBy || defaults.ownerId || \"system\",\n    createdAt: task.createdAt || defaults.createdAt || now,\n    updatedAt: task.updatedAt || now,\n  }\n}\n\n/**\n * Migrate old task format to new format (backward compatibility)\n */\nexport function migrateTask(task: any): Task {\n  // If task already has all new fields, return as-is\n  if (task.status && task.priority && task.assignedTo !== undefined) {\n    return task as Task\n  }\n\n  // Otherwise, initialize with defaults\n  return initializeTask(task)\n}\n\n/**\n * Migrate project tasks to new format\n */\nexport function migrateProjectTasks(tasks: any[]): Task[] {\n  return tasks.map(migrateTask)\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAOM,SAAS,eAAe,IAAmB,EAAE,WAGhD,CAAC,CAAC;IACJ,MAAM,MAAM,IAAI,OAAO,WAAW;IAElC,OAAO;QACL,IAAI,KAAK,EAAE,IAAI,OAAO,UAAU;QAChC,MAAM,KAAK,IAAI,IAAI;QACnB,SAAS,KAAK,OAAO,IAAI;QACzB,OAAO,KAAK,KAAK,IAAI;QACrB,UAAU,KAAK,QAAQ,IAAI;QAC3B,UAAU,KAAK,QAAQ,IAAI;QAC3B,WAAW,KAAK,SAAS,IAAI;QAC7B,SAAS,KAAK,OAAO,IAAI;QACzB,UAAU,KAAK,QAAQ,IAAI;QAC3B,MAAM,KAAK,IAAI,IAAI;QACnB,gBAAgB,KAAK,cAAc,IAAI;QACvC,cAAc,KAAK,YAAY,IAAI,EAAE;QAErC,iBAAiB;QACjB,QAAQ,KAAK,MAAM,IAAI;QACvB,UAAU,KAAK,QAAQ,IAAI;QAC3B,YAAY,KAAK,UAAU,IAAI,CAAC,KAAK,QAAQ,GAAG;YAAC,KAAK,QAAQ;SAAC,GAAG,EAAE;QACpE,SAAS,KAAK,OAAO,IAAI,KAAK,OAAO,IAAI;QACzC,aAAa,KAAK,WAAW,IAAI;QACjC,WAAW,KAAK,SAAS,IAAI,EAAE;QAC/B,QAAQ,KAAK,MAAM,IAAI,EAAE;QACzB,UAAU,KAAK,QAAQ,IAAI;QAE3B,yBAAyB;QACzB,YAAY,KAAK,UAAU,IAAI;QAC/B,aAAa,KAAK,WAAW,IAAI;QACjC,WAAW,KAAK,SAAS,IAAI;QAC7B,YAAY,KAAK,UAAU,IAAI;QAC/B,WAAW,KAAK,SAAS,IAAI;QAC7B,eAAe,KAAK,aAAa,IAAI;QACrC,cAAc,KAAK,YAAY,IAAI,KAAK,YAAY,IAAI,EAAE;QAC1D,YAAY,KAAK,UAAU,IAAI,EAAE;QAEjC,oBAAoB;QACpB,gBAAgB,KAAK,cAAc,IAAI;QACvC,gBAAgB,KAAK,cAAc;QACnC,aAAa,KAAK,WAAW,IAAK,KAAK,QAAQ,KAAK;QACpD,WAAW,KAAK,SAAS,IAAI;QAC7B,MAAM,KAAK,IAAI,IAAK,KAAK,QAAQ,GAAG;QACpC,iBAAiB,KAAK,eAAe,IAAI;QACzC,aAAa,KAAK,WAAW,IAAI;QACjC,cAAc,KAAK,YAAY,IAAI;QACnC,eAAe,KAAK,aAAa,IAAI;QACrC,gBAAgB,KAAK,cAAc,IAAI;QACvC,kBAAkB,KAAK,gBAAgB,IAAI;QAE3C,gBAAgB;QAChB,UAAU,KAAK,QAAQ,IAAI,EAAE;QAC7B,aAAa,KAAK,WAAW,IAAI,EAAE;QAEnC,WAAW;QACX,WAAW,KAAK,SAAS,IAAI,SAAS,OAAO,IAAI;QACjD,WAAW,KAAK,SAAS,IAAI,SAAS,SAAS,IAAI;QACnD,WAAW,KAAK,SAAS,IAAI;IAC/B;AACF;AAKO,SAAS,YAAY,IAAS;IACnC,mDAAmD;IACnD,IAAI,KAAK,MAAM,IAAI,KAAK,QAAQ,IAAI,KAAK,UAAU,KAAK,WAAW;QACjE,OAAO;IACT;IAEA,sCAAsC;IACtC,OAAO,eAAe;AACxB;AAKO,SAAS,oBAAoB,KAAY;IAC9C,OAAO,MAAM,GAAG,CAAC;AACnB"}},
    {"offset": {"line": 2164, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/storage.ts"],"sourcesContent":["import type { Project, ProjectType } from \"./types\"\nimport { generateWBS } from \"./ai-generator\"\nimport { migrateProjectTasks, initializeTask } from \"./task-utils\"\n\nconst STORAGE_KEY = \"ai-project-planner-projects\"\n\nexport function getProjects(): Project[] {\n  if (typeof window === \"undefined\") return []\n  const data = localStorage.getItem(STORAGE_KEY)\n  if (!data) return []\n\n  const projects: Project[] = JSON.parse(data)\n\n  // Migrate old projects to new format\n  return projects.map(project => {\n    // Migrate tasks\n    const migratedTasks = migrateProjectTasks(project.tasks)\n\n    // Ensure project has all new fields\n    return {\n      ...project,\n      tasks: migratedTasks,\n      planType: project.planType || \"project\",\n      ownerId: project.ownerId || \"current-user\",\n      members: project.members || [project.ownerId || \"current-user\"],\n      isPublic: project.isPublic ?? false,\n      dependencies: project.dependencies || [],\n      criticalPath: project.criticalPath || [],\n      activityFeed: project.activityFeed || [],\n      automationRules: project.automationRules || [],\n    }\n  })\n}\n\nexport function getProjectById(id: string): Project | null {\n  const projects = getProjects()\n  return projects.find((p) => p.id === id) || null\n}\n\nexport function saveProject(project: Project): void {\n  const projects = getProjects()\n  const index = projects.findIndex((p) => p.id === project.id)\n  if (index >= 0) {\n    projects[index] = project\n  } else {\n    projects.push(project)\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(projects))\n}\n\nexport function deleteProject(id: string): void {\n  const projects = getProjects().filter((p) => p.id !== id)\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(projects))\n}\n\nexport function updateProject(project: Project): void {\n  project.updatedAt = new Date().toISOString()\n  saveProject(project)\n}\n\nexport function createProject({\n  name,\n  description,\n  type,\n  planType = \"project\",\n  ownerId = \"current-user\",\n}: {\n  name: string\n  description: string\n  type: ProjectType\n  planType?: \"marketing\" | \"sales\" | \"software\" | \"it\" | \"hr\" | \"project\" | \"custom\"\n  ownerId?: string\n}): Project {\n  const startDate = new Date()\n  startDate.setDate(startDate.getDate() + 7) // Start next week\n\n  const { tasks, resources, duration, budget } = generateWBS(type, startDate)\n\n  // Initialize tasks with Planner fields using utility function\n  const initializedTasks = tasks.map(task =>\n    initializeTask(task, { ownerId, createdAt: new Date().toISOString() })\n  )\n\n  const project: Project = {\n    id: crypto.randomUUID(),\n    name,\n    description,\n    type,\n    status: \"active\",\n    startDate: startDate.toISOString(),\n    duration,\n    budget,\n    tasks: initializedTasks,\n    resources,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    planType: planType as any,\n    ownerId,\n    members: [ownerId],\n    isPublic: false,\n    dependencies: [],\n    criticalPath: [],\n    activityFeed: [],\n    automationRules: [],\n  }\n\n  saveProject(project)\n  return project\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AACA;AACA;;;AAEA,MAAM,cAAc;AAEb,SAAS;IACd,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;IAGN,MAAM;AAqBR;AAEO,SAAS,eAAe,EAAU;IACvC,MAAM,WAAW;IACjB,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO;AAC9C;AAEO,SAAS,YAAY,OAAgB;IAC1C,MAAM,WAAW;IACjB,MAAM,QAAQ,SAAS,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,EAAE;IAC3D,IAAI,SAAS,GAAG;QACd,QAAQ,CAAC,MAAM,GAAG;IACpB,OAAO;QACL,SAAS,IAAI,CAAC;IAChB;IACA,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AACnD;AAEO,SAAS,cAAc,EAAU;IACtC,MAAM,WAAW,cAAc,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACtD,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AACnD;AAEO,SAAS,cAAc,OAAgB;IAC5C,QAAQ,SAAS,GAAG,IAAI,OAAO,WAAW;IAC1C,YAAY;AACd;AAEO,SAAS,cAAc,EAC5B,IAAI,EACJ,WAAW,EACX,IAAI,EACJ,WAAW,SAAS,EACpB,UAAU,cAAc,EAOzB;IACC,MAAM,YAAY,IAAI;IACtB,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK,IAAG,kBAAkB;IAE7D,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,IAAA,qIAAW,EAAC,MAAM;IAEjE,8DAA8D;IAC9D,MAAM,mBAAmB,MAAM,GAAG,CAAC,CAAA,OACjC,IAAA,sIAAc,EAAC,MAAM;YAAE;YAAS,WAAW,IAAI,OAAO,WAAW;QAAG;IAGtE,MAAM,UAAmB;QACvB,IAAI,OAAO,UAAU;QACrB;QACA;QACA;QACA,QAAQ;QACR,WAAW,UAAU,WAAW;QAChC;QACA;QACA,OAAO;QACP;QACA,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,IAAI,OAAO,WAAW;QACjC,UAAU;QACV;QACA,SAAS;YAAC;SAAQ;QAClB,UAAU;QACV,cAAc,EAAE;QAChB,cAAc,EAAE;QAChB,cAAc,EAAE;QAChB,iBAAiB,EAAE;IACrB;IAEA,YAAY;IACZ,OAAO;AACT"}},
    {"offset": {"line": 2252, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2409, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/project-header.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Input } from \"@/components/ui/input\"\nimport { ChevronLeft, Download, Sparkles, Edit2, Check, X } from \"lucide-react\"\nimport type { Project } from \"@/lib/types\"\nimport { exportToMPP } from \"@/lib/mpp-export\"\nimport { updateProject, getProjectById } from \"@/lib/storage\"\nimport { useState, useEffect } from \"react\"\nimport { useToast } from \"@/hooks/use-toast\"\n\ninterface ProjectHeaderProps {\n  project: Project\n}\n\nexport function ProjectHeader({ project }: ProjectHeaderProps) {\n  const { toast } = useToast()\n  const [isExporting, setIsExporting] = useState(false)\n  const [isEditingName, setIsEditingName] = useState(false)\n  const [editName, setEditName] = useState(project.name)\n  const [isEditingDesc, setIsEditingDesc] = useState(false)\n  const [editDesc, setEditDesc] = useState(project.description)\n\n  // Sync local state when project prop changes\n  useEffect(() => {\n    if (!isEditingName) {\n      setEditName(project.name)\n    }\n    if (!isEditingDesc) {\n      setEditDesc(project.description)\n    }\n  }, [project.name, project.description, isEditingName, isEditingDesc])\n\n  const handleExportMPP = async () => {\n    setIsExporting(true)\n    toast({\n      title: \"Preparing download\",\n      description: \"It will download as XML. Open with Microsoft Project (File > Open and pick XML if prompted).\",\n      duration: 7000,\n    })\n    try {\n      // Get the latest project data from storage to ensure we export the most recent version\n      const latestProject = getProjectById(project.id) || project\n      const message = await exportToMPP(latestProject)\n      toast({\n        title: \"Export Complete\",\n        description: message,\n        duration: 8000,\n      })\n    } catch (error) {\n      toast({\n        title: \"Export Failed\",\n        description: \"An error occurred while exporting the file.\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const saveName = () => {\n    updateProject({ ...project, name: editName })\n    setIsEditingName(false)\n  }\n\n  const saveDesc = () => {\n    updateProject({ ...project, description: editDesc })\n    setIsEditingDesc(false)\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return \"bg-gradient-to-r from-chart-4 to-success text-white border-0\"\n      case \"planning\":\n        return \"bg-gradient-to-r from-chart-2 to-info text-white border-0\"\n      case \"completed\":\n        return \"bg-gradient-to-r from-chart-1 to-chart-5 text-white border-0\"\n      default:\n        return \"\"\n    }\n  }\n\n  return (\n    <header className=\"border-b-2 border-primary/20 bg-gradient-to-r from-card via-card to-primary/5 sticky top-0 z-50 shadow-lg backdrop-blur-xl\">\n      <div className=\"container mx-auto px-4 py-4\">\n        <div className=\"flex items-center gap-4 mb-4\">\n          <Link href=\"/dashboard\">\n            <Button variant=\"ghost\" size=\"icon\" className=\"hover:bg-primary/10 hover:text-primary\">\n              <ChevronLeft className=\"size-5\" />\n            </Button>\n          </Link>\n          <div className=\"size-12 rounded-xl gradient-primary flex items-center justify-center shadow-lg shadow-primary/40\">\n            <Sparkles className=\"size-7 text-white\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            {isEditingName ? (\n              <div className=\"flex items-center gap-2\">\n                <Input\n                  value={editName}\n                  onChange={(e) => setEditName(e.target.value)}\n                  className=\"text-2xl font-bold h-10\"\n                />\n                <Button size=\"icon\" variant=\"ghost\" className=\"text-success shrink-0\" onClick={saveName}>\n                  <Check className=\"size-4\" />\n                </Button>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"text-destructive shrink-0\"\n                  onClick={() => setIsEditingName(false)}\n                >\n                  <X className=\"size-4\" />\n                </Button>\n              </div>\n            ) : (\n              <h1\n                className=\"text-2xl md:text-3xl font-black bg-gradient-to-r from-primary via-chart-1 to-chart-2 bg-clip-text text-transparent flex items-center gap-2 group cursor-pointer\"\n                onClick={() => setIsEditingName(true)}\n              >\n                {project.name}\n                <Edit2 className=\"size-4 opacity-0 group-hover:opacity-100 text-muted-foreground\" />\n              </h1>\n            )}\n            {isEditingDesc ? (\n              <div className=\"flex items-center gap-2 mt-1\">\n                <Input value={editDesc} onChange={(e) => setEditDesc(e.target.value)} className=\"text-sm\" />\n                <Button size=\"icon\" variant=\"ghost\" className=\"size-7 text-success shrink-0\" onClick={saveDesc}>\n                  <Check className=\"size-3\" />\n                </Button>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"size-7 text-destructive shrink-0\"\n                  onClick={() => setIsEditingDesc(false)}\n                >\n                  <X className=\"size-3\" />\n                </Button>\n              </div>\n            ) : (\n              <p\n                className=\"text-sm md:text-base text-muted-foreground group cursor-pointer flex items-center gap-2\"\n                onClick={() => setIsEditingDesc(true)}\n              >\n                {project.description}\n                <Edit2 className=\"size-3 opacity-0 group-hover:opacity-100\" />\n              </p>\n            )}\n          </div>\n          <div className=\"flex items-center gap-3 shrink-0\">\n            <Badge className={`${getStatusColor(project.status)} text-base px-4 py-1.5 shadow-lg`}>\n              {project.status}\n            </Badge>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"gap-2 border-2 border-primary/30 hover:bg-primary/10 hover:border-primary font-semibold bg-transparent\"\n            >\n              <Sparkles className=\"size-4 text-primary\" />\n              AI Insights\n            </Button>\n                <Button\n                  size=\"sm\"\n                  className=\"gap-2 gradient-primary shadow-lg shadow-primary/40 hover:shadow-primary/60 transition-all font-semibold\"\n                  disabled={isExporting}\n              onClick={handleExportMPP}\n                >\n                  <Download className=\"size-4\" />\n              {isExporting ? \"Preparing XML...\" : \"Download for MS Project\"}\n                </Button>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2780, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2846, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2948, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2975, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,2KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 3157, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,kHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,2OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,aAAU;YACV,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,qNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8OAAC,+KAAyB;QACxB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8OAAC,oLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,qOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,sLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 3390, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/wbs-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { ChevronRight, ChevronDown, Plus, Sparkles, Edit2, Trash2, Check, X } from \"lucide-react\"\nimport type { Project, Task } from \"@/lib/types\"\nimport { useState } from \"react\"\nimport { updateProject } from \"@/lib/storage\"\nimport { RESOURCE_RATES } from \"@/lib/constants\"\n\ninterface WBSViewProps {\n  project: Project\n  onUpdate?: () => void\n}\n\nexport function WBSView({ project, onUpdate }: WBSViewProps) {\n  const [expandedTasks, setExpandedTasks] = useState<Set<string>>(\n    new Set(project.tasks.filter((t) => t.level === 1).map((t) => t.id)),\n  )\n  const [editingTask, setEditingTask] = useState<string | null>(null)\n  const [editValues, setEditValues] = useState<{ name: string; duration: number; cost: number }>({\n    name: \"\",\n    duration: 0,\n    cost: 0,\n  })\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false)\n  const [newTask, setNewTask] = useState({\n    name: \"\",\n    duration: 1,\n    parentId: \"\",\n    resource: \"\",\n  })\n\n  const toggleTask = (taskId: string) => {\n    const newExpanded = new Set(expandedTasks)\n    if (newExpanded.has(taskId)) {\n      newExpanded.delete(taskId)\n    } else {\n      newExpanded.add(taskId)\n    }\n    setExpandedTasks(newExpanded)\n  }\n\n  const startEdit = (task: Task, e: React.MouseEvent) => {\n    e.stopPropagation()\n    setEditingTask(task.id)\n    setEditValues({ name: task.name, duration: task.duration, cost: task.cost })\n  }\n\n  const saveEdit = (taskId: string) => {\n    const updatedTasks = project.tasks.map((t) => (t.id === taskId ? { ...t, ...editValues } : t))\n    updateProject({ ...project, tasks: updatedTasks })\n    setEditingTask(null)\n    onUpdate?.()\n  }\n\n  const cancelEdit = () => {\n    setEditingTask(null)\n  }\n\n  const deleteTask = (taskId: string, e: React.MouseEvent) => {\n    e.stopPropagation()\n    if (confirm(\"Delete this task and all subtasks?\")) {\n      const deleteRecursive = (id: string): string[] => {\n        const children = project.tasks.filter((t) => t.parentId === id)\n        return [id, ...children.flatMap((c) => deleteRecursive(c.id))]\n      }\n      const toDelete = new Set(deleteRecursive(taskId))\n      const updatedTasks = project.tasks.filter((t) => !toDelete.has(t.id))\n      updateProject({ ...project, tasks: updatedTasks })\n      onUpdate?.()\n    }\n  }\n\n  const generateWBSCode = (parentId: string | null): string => {\n    if (!parentId) {\n      // Root level task\n      const rootTasks = project.tasks.filter((t) => t.level === 1)\n      return `${rootTasks.length + 1}`\n    }\n\n    const parent = project.tasks.find((t) => t.id === parentId)\n    if (!parent) return \"1.1\"\n\n    const siblings = project.tasks.filter((t) => t.parentId === parentId)\n    const parentParts = parent.wbsCode.split(\".\")\n    return `${parentParts.join(\".\")}.${siblings.length + 1}`\n  }\n\n  const addTask = () => {\n    if (!newTask.name || newTask.duration <= 0) return\n\n    const parent = newTask.parentId ? project.tasks.find((t) => t.id === newTask.parentId) : null\n    const level = parent ? parent.level + 1 : 1\n    const wbsCode = generateWBSCode(newTask.parentId || null)\n\n    // Calculate dates\n    let startDate = new Date(project.startDate)\n    if (parent) {\n      startDate = new Date(parent.startDate)\n    } else {\n      // Find the latest end date of root tasks\n      const rootTasks = project.tasks.filter((t) => t.level === 1)\n      if (rootTasks.length > 0) {\n        const latestEndDate = rootTasks.reduce((latest, task) => {\n          const taskEnd = new Date(task.endDate)\n          return taskEnd > latest ? taskEnd : latest\n        }, new Date(project.startDate))\n        startDate = latestEndDate\n      }\n    }\n\n    const endDate = new Date(startDate)\n    endDate.setDate(endDate.getDate() + newTask.duration)\n\n    // Calculate cost\n    const rate = newTask.resource\n      ? RESOURCE_RATES[newTask.resource as keyof typeof RESOURCE_RATES] || 100\n      : 100\n    const cost = newTask.duration * 8 * rate\n\n    const task: Task = {\n      id: crypto.randomUUID(),\n      name: newTask.name,\n      wbsCode,\n      level,\n      parentId: newTask.parentId || null,\n      duration: newTask.duration,\n      startDate: startDate.toISOString(),\n      endDate: endDate.toISOString(),\n      resource: newTask.resource || null,\n      cost,\n      isCriticalPath: false,\n      dependencies: [],\n    }\n\n    const updatedTasks = [...project.tasks, task]\n    updateProject({ ...project, tasks: updatedTasks })\n    \n    // Expand parent if task has one\n    if (parent) {\n      setExpandedTasks(new Set([...expandedTasks, parent.id]))\n    }\n\n    // Reset form\n    setNewTask({ name: \"\", duration: 1, parentId: \"\", resource: \"\" })\n    setIsAddDialogOpen(false)\n    onUpdate?.()\n  }\n\n  const renderTask = (task: Task) => {\n    const children = project.tasks.filter((t) => t.parentId === task.id)\n    const isExpanded = expandedTasks.has(task.id)\n    const hasChildren = children.length > 0\n    const isEditing = editingTask === task.id\n\n    return (\n      <div key={task.id}>\n        <div\n          className=\"flex items-center gap-3 py-3 px-4 hover:bg-gradient-to-r hover:from-primary/5 hover:to-chart-1/5 rounded-xl transition-all cursor-pointer group border border-transparent hover:border-primary/20\"\n          style={{ paddingLeft: `${task.level * 1.5 + 1}rem` }}\n        >\n          <button onClick={() => toggleTask(task.id)} className=\"shrink-0\" disabled={!hasChildren}>\n            {hasChildren ? (\n              isExpanded ? (\n                <ChevronDown className=\"size-4 text-primary\" />\n              ) : (\n                <ChevronRight className=\"size-4 text-muted-foreground\" />\n              )\n            ) : (\n              <div className=\"size-4\" />\n            )}\n          </button>\n\n          {isEditing ? (\n            <>\n              <Input\n                value={editValues.name}\n                onChange={(e) => setEditValues({ ...editValues, name: e.target.value })}\n                className=\"flex-1 h-8\"\n                onClick={(e) => e.stopPropagation()}\n              />\n              <Input\n                type=\"number\"\n                value={editValues.duration}\n                onChange={(e) => setEditValues({ ...editValues, duration: Number.parseInt(e.target.value) || 0 })}\n                className=\"w-20 h-8\"\n                onClick={(e) => e.stopPropagation()}\n              />\n              <Input\n                type=\"number\"\n                value={editValues.cost}\n                onChange={(e) => setEditValues({ ...editValues, cost: Number.parseInt(e.target.value) || 0 })}\n                className=\"w-24 h-8\"\n                onClick={(e) => e.stopPropagation()}\n              />\n              <Button size=\"icon\" variant=\"ghost\" className=\"size-8 text-success\" onClick={() => saveEdit(task.id)}>\n                <Check className=\"size-4\" />\n              </Button>\n              <Button size=\"icon\" variant=\"ghost\" className=\"size-8 text-destructive\" onClick={cancelEdit}>\n                <X className=\"size-4\" />\n              </Button>\n            </>\n          ) : (\n            <>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"font-semibold text-foreground\">{task.name}</div>\n                <div className=\"text-sm text-muted-foreground\">{task.wbsCode}</div>\n              </div>\n              <Badge\n                variant=\"outline\"\n                className=\"shrink-0 bg-gradient-to-r from-chart-2/10 to-info/10 border-chart-2/30\"\n              >\n                {task.duration}d\n              </Badge>\n              {task.resource && (\n                <Badge variant=\"secondary\" className=\"shrink-0 bg-gradient-to-r from-chart-4/20 to-success/20\">\n                  {task.resource}\n                </Badge>\n              )}\n              <Badge\n                variant=\"outline\"\n                className=\"shrink-0 bg-gradient-to-r from-chart-3/10 to-warning/10 border-chart-3/30\"\n              >\n                ${task.cost.toLocaleString()}\n              </Badge>\n              <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1\">\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"size-8 hover:bg-primary/10 hover:text-primary\"\n                  onClick={(e) => startEdit(task, e)}\n                >\n                  <Edit2 className=\"size-3.5\" />\n                </Button>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"size-8 hover:bg-destructive/10 hover:text-destructive\"\n                  onClick={(e) => deleteTask(task.id, e)}\n                >\n                  <Trash2 className=\"size-3.5\" />\n                </Button>\n              </div>\n            </>\n          )}\n        </div>\n        {isExpanded && children.map((child) => renderTask(child))}\n      </div>\n    )\n  }\n\n  const rootTasks = project.tasks.filter((t) => t.level === 1)\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"gradient-card border-l-4 border-l-chart-1 shadow-lg\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-2xl flex items-center gap-2\">\n                <span className=\"size-2 rounded-full bg-gradient-to-r from-chart-1 to-chart-5 animate-pulse\" />\n                Work Breakdown Structure\n              </CardTitle>\n              <CardDescription className=\"text-base mt-1\">\n                AI-generated task hierarchy with inline editing\n              </CardDescription>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <Sparkles className=\"size-4 text-primary\" />\n                Regenerate\n              </Button>\n              <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button size=\"sm\" className=\"gap-2 gradient-primary shadow-lg shadow-primary/30\">\n                    <Plus className=\"size-4\" />\n                    Add Task\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Add New Task</DialogTitle>\n                    <DialogDescription>Create a new task in your project</DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4 py-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"task-name\">Task Name</Label>\n                      <Input\n                        id=\"task-name\"\n                        placeholder=\"Enter task name\"\n                        value={newTask.name}\n                        onChange={(e) => setNewTask({ ...newTask, name: e.target.value })}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"task-duration\">Duration (days)</Label>\n                      <Input\n                        id=\"task-duration\"\n                        type=\"number\"\n                        min=\"1\"\n                        placeholder=\"1\"\n                        value={newTask.duration}\n                        onChange={(e) => setNewTask({ ...newTask, duration: Number.parseInt(e.target.value) || 1 })}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"task-parent\">Parent Task (Optional)</Label>\n                      <Select \n                        value={newTask.parentId || \"none\"} \n                        onValueChange={(value) => setNewTask({ ...newTask, parentId: value === \"none\" ? \"\" : value })}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select parent task (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">None (Root Level)</SelectItem>\n                          {project.tasks\n                            .filter((t) => t.level <= 2)\n                            .map((task) => (\n                              <SelectItem key={task.id} value={task.id}>\n                                {task.wbsCode} - {task.name}\n                              </SelectItem>\n                            ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"task-resource\">Resource (Optional)</Label>\n                      <Select \n                        value={newTask.resource || \"none\"} \n                        onValueChange={(value) => setNewTask({ ...newTask, resource: value === \"none\" ? \"\" : value })}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select resource (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">None</SelectItem>\n                          {project.resources.map((resource) => (\n                            <SelectItem key={resource.id} value={resource.role}>\n                              {resource.role}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end gap-3\">\n                    <Button variant=\"outline\" onClick={() => setIsAddDialogOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button onClick={addTask} className=\"gradient-primary\">\n                      Add Task\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-1\">{rootTasks.map((task) => renderTask(task))}</div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"gradient-card border-l-4 border-l-primary shadow-lg\">\n        <CardHeader>\n          <CardTitle className=\"text-xl\">Project Summary</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\n            <div className=\"text-center p-4 rounded-xl bg-gradient-to-br from-chart-1/10 to-chart-1/5 border border-chart-1/20\">\n              <div className=\"text-sm font-medium text-muted-foreground mb-1\">Total Tasks</div>\n              <div className=\"text-3xl font-black bg-gradient-to-r from-chart-1 to-chart-5 bg-clip-text text-transparent\">\n                {project.tasks.length}\n              </div>\n            </div>\n            <div className=\"text-center p-4 rounded-xl bg-gradient-to-br from-chart-2/10 to-chart-2/5 border border-chart-2/20\">\n              <div className=\"text-sm font-medium text-muted-foreground mb-1\">Duration</div>\n              <div className=\"text-3xl font-black bg-gradient-to-r from-chart-2 to-info bg-clip-text text-transparent\">\n                {project.duration} days\n              </div>\n            </div>\n            <div className=\"text-center p-4 rounded-xl bg-gradient-to-br from-chart-3/10 to-chart-3/5 border border-chart-3/20\">\n              <div className=\"text-sm font-medium text-muted-foreground mb-1\">Budget</div>\n              <div className=\"text-3xl font-black bg-gradient-to-r from-chart-3 to-warning bg-clip-text text-transparent\">\n                ${project.budget.toLocaleString()}\n              </div>\n            </div>\n            <div className=\"text-center p-4 rounded-xl bg-gradient-to-br from-chart-4/10 to-chart-4/5 border border-chart-4/20\">\n              <div className=\"text-sm font-medium text-muted-foreground mb-1\">Resources</div>\n              <div className=\"text-3xl font-black bg-gradient-to-r from-chart-4 to-success bg-clip-text text-transparent\">\n                {project.resources.length}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4366, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/chart.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as RechartsPrimitive from 'recharts'\n\nimport { cn } from '@/lib/utils'\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: '', dark: '.dark' } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error('useChart must be used within a <ChartContainer />')\n  }\n\n  return context\n}\n\nfunction ChartContainer({\n  id,\n  className,\n  children,\n  config,\n  ...props\n}: React.ComponentProps<'div'> & {\n  config: ChartConfig\n  children: React.ComponentProps<\n    typeof RechartsPrimitive.ResponsiveContainer\n  >['children']\n}) {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, '')}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-slot=\"chart\"\n        data-chart={chartId}\n        className={cn(\n          \"[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden\",\n          className,\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n}\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color,\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join('\\n')}\n}\n`,\n          )\n          .join('\\n'),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nfunction ChartTooltipContent({\n  active,\n  payload,\n  className,\n  indicator = 'dot',\n  hideLabel = false,\n  hideIndicator = false,\n  label,\n  labelFormatter,\n  labelClassName,\n  formatter,\n  color,\n  nameKey,\n  labelKey,\n}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n  React.ComponentProps<'div'> & {\n    hideLabel?: boolean\n    hideIndicator?: boolean\n    indicator?: 'line' | 'dot' | 'dashed'\n    nameKey?: string\n    labelKey?: string\n  }) {\n  const { config } = useChart()\n\n  const tooltipLabel = React.useMemo(() => {\n    if (hideLabel || !payload?.length) {\n      return null\n    }\n\n    const [item] = payload\n    const key = `${labelKey || item?.dataKey || item?.name || 'value'}`\n    const itemConfig = getPayloadConfigFromPayload(config, item, key)\n    const value =\n      !labelKey && typeof label === 'string'\n        ? config[label as keyof typeof config]?.label || label\n        : itemConfig?.label\n\n    if (labelFormatter) {\n      return (\n        <div className={cn('font-medium', labelClassName)}>\n          {labelFormatter(value, payload)}\n        </div>\n      )\n    }\n\n    if (!value) {\n      return null\n    }\n\n    return <div className={cn('font-medium', labelClassName)}>{value}</div>\n  }, [\n    label,\n    labelFormatter,\n    payload,\n    hideLabel,\n    labelClassName,\n    config,\n    labelKey,\n  ])\n\n  if (!active || !payload?.length) {\n    return null\n  }\n\n  const nestLabel = payload.length === 1 && indicator !== 'dot'\n\n  return (\n    <div\n      className={cn(\n        'border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl',\n        className,\n      )}\n    >\n      {!nestLabel ? tooltipLabel : null}\n      <div className=\"grid gap-1.5\">\n        {payload.map((item, index) => {\n          const key = `${nameKey || item.name || item.dataKey || 'value'}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n          const indicatorColor = color || item.payload.fill || item.color\n\n          return (\n            <div\n              key={item.dataKey}\n              className={cn(\n                '[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5',\n                indicator === 'dot' && 'items-center',\n              )}\n            >\n              {formatter && item?.value !== undefined && item.name ? (\n                formatter(item.value, item.name, item, index, item.payload)\n              ) : (\n                <>\n                  {itemConfig?.icon ? (\n                    <itemConfig.icon />\n                  ) : (\n                    !hideIndicator && (\n                      <div\n                        className={cn(\n                          'shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)',\n                          {\n                            'h-2.5 w-2.5': indicator === 'dot',\n                            'w-1': indicator === 'line',\n                            'w-0 border-[1.5px] border-dashed bg-transparent':\n                              indicator === 'dashed',\n                            'my-0.5': nestLabel && indicator === 'dashed',\n                          },\n                        )}\n                        style={\n                          {\n                            '--color-bg': indicatorColor,\n                            '--color-border': indicatorColor,\n                          } as React.CSSProperties\n                        }\n                      />\n                    )\n                  )}\n                  <div\n                    className={cn(\n                      'flex flex-1 justify-between leading-none',\n                      nestLabel ? 'items-end' : 'items-center',\n                    )}\n                  >\n                    <div className=\"grid gap-1.5\">\n                      {nestLabel ? tooltipLabel : null}\n                      <span className=\"text-muted-foreground\">\n                        {itemConfig?.label || item.name}\n                      </span>\n                    </div>\n                    {item.value && (\n                      <span className=\"text-foreground font-mono font-medium tabular-nums\">\n                        {item.value.toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nfunction ChartLegendContent({\n  className,\n  hideIcon = false,\n  payload,\n  verticalAlign = 'bottom',\n  nameKey,\n}: React.ComponentProps<'div'> &\n  Pick<RechartsPrimitive.LegendProps, 'payload' | 'verticalAlign'> & {\n    hideIcon?: boolean\n    nameKey?: string\n  }) {\n  const { config } = useChart()\n\n  if (!payload?.length) {\n    return null\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-center gap-4',\n        verticalAlign === 'top' ? 'pb-3' : 'pt-3',\n        className,\n      )}\n    >\n      {payload.map((item) => {\n        const key = `${nameKey || item.dataKey || 'value'}`\n        const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n        return (\n          <div\n            key={item.value}\n            className={\n              '[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3'\n            }\n          >\n            {itemConfig?.icon && !hideIcon ? (\n              <itemConfig.icon />\n            ) : (\n              <div\n                className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                style={{\n                  backgroundColor: item.color,\n                }}\n              />\n            )}\n            {itemConfig?.label}\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string,\n) {\n  if (typeof payload !== 'object' || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    'payload' in payload &&\n    typeof payload.payload === 'object' &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === 'string'\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === 'string'\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4661, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/gantt-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { Maximize2, Minimize2, ZoomIn, ZoomOut, BarChart3 } from \"lucide-react\"\nimport type { Project } from \"@/lib/types\"\nimport { useState, useMemo } from \"react\"\nimport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n} from \"@/components/ui/chart\"\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, ResponsiveContainer, LineChart, Line, Area, AreaChart } from \"recharts\"\n\ninterface GanttViewProps {\n  project: Project\n}\n\nexport function GanttView({ project }: GanttViewProps) {\n  const startDate = new Date(project.startDate)\n  const totalDays = project.duration\n  const [daysToShow, setDaysToShow] = useState(Math.min(totalDays, 60))\n  const [isFullView, setIsFullView] = useState(false)\n  const [showWorkChart, setShowWorkChart] = useState(true)\n\n  const zoomIn = () => setDaysToShow(Math.max(30, daysToShow - 10))\n  const zoomOut = () => setDaysToShow(Math.min(totalDays, daysToShow + 10))\n\n  const dates = Array.from({ length: daysToShow }, (_, i) => {\n    const date = new Date(startDate)\n    date.setDate(date.getDate() + i)\n    return date\n  })\n\n  // Calculate work distribution data for the chart\n  const workChartData = useMemo(() => {\n    const data: Array<{ date: string; workHours: number; tasks: number; cost: number }> = []\n\n    for (let i = 0; i < Math.min(daysToShow, totalDays); i++) {\n      const date = new Date(startDate)\n      date.setDate(date.getDate() + i)\n      const dateStr = date.toISOString().split('T')[0]\n\n      // Find tasks active on this date\n      const activeTasks = project.tasks.filter((task) => {\n        const taskStart = new Date(task.startDate)\n        const taskEnd = new Date(task.endDate)\n        return date >= taskStart && date <= taskEnd\n      })\n\n      const workHours = activeTasks.reduce((sum, task) => {\n        // Assuming 8 hours per day per task\n        return sum + 8\n      }, 0)\n\n      const cost = activeTasks.reduce((sum, task) => {\n        // Daily cost = task cost / task duration\n        return sum + (task.cost / task.duration)\n      }, 0)\n\n      data.push({\n        date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n        workHours,\n        tasks: activeTasks.length,\n        cost: Math.round(cost),\n      })\n    }\n\n    return data\n  }, [project.tasks, startDate, daysToShow, totalDays])\n\n  // Get tasks to display based on view mode\n  const tasksToDisplay = isFullView\n    ? project.tasks\n    : project.tasks.filter((t) => t.level <= 2)\n\n  // Calculate schedule statistics\n  const scheduleStats = useMemo(() => {\n    const allTasks = project.tasks.filter(t => t.level <= 2)\n    const startDates = allTasks.map(t => new Date(t.startDate))\n    const endDates = allTasks.map(t => new Date(t.endDate))\n    const earliestStart = new Date(Math.min(...startDates.map(d => d.getTime())))\n    const latestEnd = new Date(Math.max(...endDates.map(d => d.getTime())))\n    const totalDuration = Math.ceil((latestEnd.getTime() - earliestStart.getTime()) / (1000 * 60 * 60 * 24))\n    const criticalTasks = allTasks.filter(t => t.isCriticalPath)\n    const totalWorkDays = allTasks.reduce((sum, t) => sum + t.duration, 0)\n\n    return {\n      earliestStart,\n      latestEnd,\n      totalDuration,\n      criticalTasks: criticalTasks.length,\n      totalTasks: allTasks.length,\n      totalWorkDays,\n    }\n  }, [project.tasks])\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Schedule Summary */}\n      <div className=\"grid md:grid-cols-4 gap-4\">\n        <Card className=\"gradient-card border-l-4 border-l-chart-1 shadow-lg\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-semibold\">Project Start</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-lg font-bold\">\n              {scheduleStats.earliestStart.toLocaleDateString()}\n            </div>\n          </CardContent>\n        </Card>\n        <Card className=\"gradient-card border-l-4 border-l-chart-2 shadow-lg\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-semibold\">Project End</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-lg font-bold\">\n              {scheduleStats.latestEnd.toLocaleDateString()}\n            </div>\n          </CardContent>\n        </Card>\n        <Card className=\"gradient-card border-l-4 border-l-chart-3 shadow-lg\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-semibold\">Total Duration</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-lg font-bold\">\n              {scheduleStats.totalDuration} days\n            </div>\n            <div className=\"text-xs text-muted-foreground mt-1\">\n              {Math.round(scheduleStats.totalDuration / 7)} weeks\n            </div>\n          </CardContent>\n        </Card>\n        <Card className=\"gradient-card border-l-4 border-l-chart-4 shadow-lg\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-semibold\">Critical Tasks</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-lg font-bold\">\n              {scheduleStats.criticalTasks} / {scheduleStats.totalTasks}\n            </div>\n            <div className=\"text-xs text-muted-foreground mt-1\">\n              {Math.round((scheduleStats.criticalTasks / scheduleStats.totalTasks) * 100)}% critical\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"gradient-card border-l-4 border-l-chart-2 shadow-lg\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-2xl flex items-center gap-2\">\n                <span className=\"size-2 rounded-full bg-gradient-to-r from-chart-2 to-info animate-pulse\" />\n                Schedule Timetable (Gantt Chart)\n              </CardTitle>\n              <CardDescription className=\"text-base mt-1\">\n                Visual timeline of project tasks, dependencies, and schedule\n              </CardDescription>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={zoomOut}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <ZoomOut className=\"size-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={zoomIn}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <ZoomIn className=\"size-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setIsFullView(!isFullView)}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                {isFullView ? <Minimize2 className=\"size-4\" /> : <Maximize2 className=\"size-4\" />}\n                {isFullView ? \"Compact View\" : \"Full View\"}\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowWorkChart(!showWorkChart)}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <BarChart3 className=\"size-4\" />\n                {showWorkChart ? \"Hide Chart\" : \"Show Chart\"}\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"overflow-x-auto rounded-xl border border-border/50\">\n            <div className=\"min-w-max\">\n              <div className=\"flex border-b-2 border-primary/20 bg-gradient-to-r from-muted/50 to-muted/30\">\n                <div className=\"w-72 p-4 font-bold sticky left-0 bg-gradient-to-r from-card to-muted/50 border-r-2 border-primary/20\">\n                  Task Name\n                </div>\n                <div className=\"flex\">\n                  {dates.map((date, i) => (\n                    <div\n                      key={i}\n                      className={`w-10 p-2 text-xs text-center font-semibold border-r border-border ${date.getDay() === 0 || date.getDay() === 6 ? \"bg-muted/40\" : \"\"\n                        }`}\n                    >\n                      <div>{date.getDate()}</div>\n                      <div className=\"text-[10px] text-muted-foreground\">\n                        {date.toLocaleDateString(\"en\", { weekday: \"short\" })}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {tasksToDisplay.map((task, index) => {\n                const taskStart = Math.floor(\n                  (new Date(task.startDate).getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24),\n                )\n                const taskWidth = task.duration\n\n                const colorMap: Record<string, string> = {\n                  \"chart-1\": \"from-chart-1 to-chart-1/80\",\n                  \"chart-2\": \"from-chart-2 to-chart-2/80\",\n                  \"chart-3\": \"from-chart-3 to-chart-3/80\",\n                  \"chart-4\": \"from-chart-4 to-chart-4/80\",\n                  \"chart-5\": \"from-chart-5 to-chart-5/80\",\n                }\n                const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n                const barColor = colors[index % colors.length]\n                const barColorClass = colorMap[barColor] || colorMap[\"chart-1\"]\n\n                return (\n                  <div\n                    key={task.id}\n                    className=\"flex border-b border-border hover:bg-gradient-to-r hover:from-primary/5 hover:to-chart-1/5 transition-all group\"\n                  >\n                    <div className=\"w-72 p-4 sticky left-0 bg-card border-r border-border group-hover:bg-gradient-to-r group-hover:from-card group-hover:to-muted/30\">\n                      <div className=\"font-semibold text-sm truncate\">{task.name}</div>\n                      <div className=\"text-xs text-muted-foreground flex items-center gap-2 mt-1 flex-wrap\">\n                        <span className=\"font-mono\">{task.wbsCode}</span>\n                        <span></span>\n                        <span>{task.duration} days</span>\n                        {task.resource && (\n                          <>\n                            <span></span>\n                            <Badge variant=\"secondary\" className=\"text-[10px] h-4 px-1\">\n                              {task.resource}\n                            </Badge>\n                          </>\n                        )}\n                      </div>\n                      <div className=\"text-[10px] text-muted-foreground mt-1\">\n                        {new Date(task.startDate).toLocaleDateString()} - {new Date(task.endDate).toLocaleDateString()}\n                      </div>\n                    </div>\n                    <div className=\"flex relative\">\n                      {dates.map((date, i) => (\n                        <div\n                          key={i}\n                          className={`w-10 border-r border-border ${date.getDay() === 0 || date.getDay() === 6 ? \"bg-muted/20\" : \"\"\n                            }`}\n                        />\n                      ))}\n                      <div\n                        className={`absolute top-3 h-8 rounded-lg flex items-center justify-center shadow-lg bg-gradient-to-r ${barColorClass} hover:shadow-xl transition-all cursor-pointer group/task`}\n                        style={{\n                          left: `${taskStart * 40}px`,\n                          width: `${Math.min(taskWidth * 40, (daysToShow - taskStart) * 40)}px`,\n                          minWidth: \"40px\",\n                        }}\n                        title={`${task.name} - ${task.duration} days - ${task.resource || \"No resource\"}`}\n                      >\n                        <div className=\"text-xs font-bold text-white opacity-0 group-hover/task:opacity-100 transition-opacity px-2 truncate\">\n                          {task.duration}d\n                        </div>\n                        {task.isCriticalPath && (\n                          <Badge variant=\"destructive\" className=\"text-xs h-5 font-bold shadow-lg absolute -top-2 -right-2\">\n                            Critical\n                          </Badge>\n                        )}\n                      </div>\n                      {/* Show dependency arrows */}\n                      {task.dependencies && task.dependencies.length > 0 && (\n                        task.dependencies.map((depId) => {\n                          const depTask = tasksToDisplay.find(t => t.id === depId)\n                          if (!depTask) return null\n                          const depStart = Math.floor(\n                            (new Date(depTask.startDate).getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24),\n                          )\n                          const depEnd = depStart + depTask.duration\n                          const currentStart = taskStart\n\n                          return (\n                            <svg\n                              key={depId}\n                              className=\"absolute pointer-events-none\"\n                              style={{\n                                left: `${depEnd * 40}px`,\n                                top: \"20px\",\n                                width: `${(currentStart - depEnd) * 40}px`,\n                                height: \"20px\",\n                                zIndex: 1,\n                              }}\n                            >\n                              <line\n                                x1=\"0\"\n                                y1=\"10\"\n                                x2=\"100%\"\n                                y2=\"10\"\n                                stroke={task.isCriticalPath ? \"#ef4444\" : \"#64748b\"}\n                                strokeWidth=\"2\"\n                                strokeDasharray={task.isCriticalPath ? \"0\" : \"3,3\"}\n                                markerEnd=\"url(#arrowhead)\"\n                              />\n                              <defs>\n                                <marker\n                                  id=\"arrowhead\"\n                                  markerWidth=\"10\"\n                                  markerHeight=\"10\"\n                                  refX=\"9\"\n                                  refY=\"3\"\n                                  orient=\"auto\"\n                                >\n                                  <polygon points=\"0 0, 10 3, 0 6\" fill={task.isCriticalPath ? \"#ef4444\" : \"#64748b\"} />\n                                </marker>\n                              </defs>\n                            </svg>\n                          )\n                        })\n                      )}\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-4 mt-6 p-4 rounded-xl bg-gradient-to-r from-muted/30 to-muted/10 border border-border\">\n            <span className=\"text-sm font-semibold text-muted-foreground\">Legend:</span>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-gradient-to-r from-chart-1 to-chart-1/80\" />\n              <span className=\"text-sm\">Normal Task</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-destructive\" />\n              <span className=\"text-sm\">Critical Path</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded bg-muted\" />\n              <span className=\"text-sm\">Weekend</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {showWorkChart && (\n        <div className=\"space-y-6 mt-6\">\n          <Card className=\"gradient-card border-l-4 border-l-chart-3 shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl flex items-center gap-2\">\n                <BarChart3 className=\"size-5 text-chart-3\" />\n                Work Distribution Chart\n              </CardTitle>\n              <CardDescription className=\"text-base\">\n                Daily work hours, active tasks, and cost distribution over time\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <ChartContainer\n                config={{\n                  workHours: {\n                    label: \"Work Hours\",\n                    color: \"hsl(var(--chart-2))\",\n                  },\n                  tasks: {\n                    label: \"Active Tasks\",\n                    color: \"hsl(var(--chart-1))\",\n                  },\n                  cost: {\n                    label: \"Daily Cost\",\n                    color: \"hsl(var(--chart-3))\",\n                  },\n                }}\n                className=\"h-[400px] w-full\"\n              >\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={workChartData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                    <XAxis\n                      dataKey=\"date\"\n                      tick={{ fill: \"hsl(var(--muted-foreground))\" }}\n                      tickLine={{ stroke: \"hsl(var(--muted-foreground))\" }}\n                    />\n                    <YAxis\n                      yAxisId=\"left\"\n                      tick={{ fill: \"hsl(var(--muted-foreground))\" }}\n                      tickLine={{ stroke: \"hsl(var(--muted-foreground))\" }}\n                    />\n                    <YAxis\n                      yAxisId=\"right\"\n                      orientation=\"right\"\n                      tick={{ fill: \"hsl(var(--muted-foreground))\" }}\n                      tickLine={{ stroke: \"hsl(var(--muted-foreground))\" }}\n                    />\n                    <ChartTooltip content={<ChartTooltipContent />} />\n                    <Area\n                      yAxisId=\"left\"\n                      type=\"monotone\"\n                      dataKey=\"workHours\"\n                      stroke=\"hsl(var(--chart-2))\"\n                      fill=\"hsl(var(--chart-2))\"\n                      fillOpacity={0.2}\n                      name=\"Work Hours\"\n                    />\n                    <Area\n                      yAxisId=\"left\"\n                      type=\"monotone\"\n                      dataKey=\"tasks\"\n                      stroke=\"hsl(var(--chart-1))\"\n                      fill=\"hsl(var(--chart-1))\"\n                      fillOpacity={0.2}\n                      name=\"Active Tasks\"\n                    />\n                    <Line\n                      yAxisId=\"right\"\n                      type=\"monotone\"\n                      dataKey=\"cost\"\n                      stroke=\"hsl(var(--chart-3))\"\n                      strokeWidth={2}\n                      dot={{ fill: \"hsl(var(--chart-3))\", r: 3 }}\n                      name=\"Daily Cost ($)\"\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </ChartContainer>\n            </CardContent>\n          </Card>\n\n          <Card className=\"gradient-card border-l-4 border-l-chart-4 shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"text-xl\">Resource Workload</CardTitle>\n              <CardDescription>Total work hours by resource</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <ChartContainer\n                config={project.resources.reduce((acc, resource, index) => {\n                  const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n                  acc[resource.role] = {\n                    label: resource.role,\n                    color: `hsl(var(--${colors[index % colors.length]}))`,\n                  }\n                  return acc\n                }, {} as Record<string, { label: string; color: string }>)}\n                className=\"h-[300px] w-full\"\n              >\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <BarChart\n                    data={project.resources.map((resource) => {\n                      const resourceTasks = project.tasks.filter((t) => t.resource === resource.role)\n                      const totalHours = resourceTasks.reduce((sum, task) => sum + task.duration * 8, 0)\n                      return {\n                        resource: resource.role,\n                        hours: totalHours,\n                      }\n                    })}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                    <XAxis\n                      dataKey=\"resource\"\n                      tick={{ fill: \"hsl(var(--muted-foreground))\" }}\n                      tickLine={{ stroke: \"hsl(var(--muted-foreground))\" }}\n                      angle={-45}\n                      textAnchor=\"end\"\n                      height={100}\n                    />\n                    <YAxis\n                      tick={{ fill: \"hsl(var(--muted-foreground))\" }}\n                      tickLine={{ stroke: \"hsl(var(--muted-foreground))\" }}\n                    />\n                    <ChartTooltip content={<ChartTooltipContent />} />\n                    <Bar dataKey=\"hours\" fill=\"hsl(var(--chart-4))\" radius={[8, 8, 0, 0]} />\n                  </BarChart>\n                </ResponsiveContainer>\n              </ChartContainer>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5853, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/network-diagram-service.ts"],"sourcesContent":["/**\n * Network Diagram Service\n * Implements Precedence Diagramming Method (PDM) for critical path calculations\n * Calculates: Early Start (ES), Early Finish (EF), Late Start (LS), Late Finish (LF), Float/Slack\n */\n\nimport type { Task, Dependency, Project } from \"./types\"\n\nexport interface TaskScheduleData {\n  taskId: string\n  earlyStart: number // Days from project start\n  earlyFinish: number\n  lateStart: number\n  lateFinish: number\n  totalFloat: number // Total float/slack\n  freeFloat: number // Free float\n  isCritical: boolean\n}\n\nexport interface NetworkDiagramResult {\n  scheduleData: Map<string, TaskScheduleData>\n  criticalPath: string[]\n  projectDuration: number\n  isValid: boolean\n  errors: string[]\n}\n\nexport class NetworkDiagramService {\n  /**\n   * Calculate critical path using Precedence Diagramming Method (PDM)\n   */\n  static calculateCriticalPath(project: Project): NetworkDiagramResult {\n    const errors: string[] = []\n    const scheduleData = new Map<string, TaskScheduleData>()\n    const taskMap = new Map<string, Task>()\n\n    // Build task map\n    project.tasks.forEach(task => {\n      taskMap.set(task.id, task)\n    })\n\n    // Validate dependencies\n    const validationResult = this.validateDependencies(project)\n    if (!validationResult.isValid) {\n      errors.push(...validationResult.errors)\n      return {\n        scheduleData,\n        criticalPath: [],\n        projectDuration: 0,\n        isValid: false,\n        errors\n      }\n    }\n\n    // Forward Pass: Calculate Early Start (ES) and Early Finish (EF)\n    const earlyStart = new Map<string, number>()\n    const earlyFinish = new Map<string, number>()\n\n    // Find tasks with no predecessors (start tasks)\n    const startTasks = project.tasks.filter(task => {\n      const deps = this.getPredecessors(task.id, project)\n      return deps.length === 0\n    })\n\n    if (startTasks.length === 0) {\n      errors.push(\"No start tasks found. Project must have at least one task with no dependencies.\")\n      return {\n        scheduleData,\n        criticalPath: [],\n        projectDuration: 0,\n        isValid: false,\n        errors\n      }\n    }\n\n    // Initialize start tasks\n    startTasks.forEach(task => {\n      earlyStart.set(task.id, 0)\n      earlyFinish.set(task.id, task.duration)\n    })\n\n    // Topological sort for forward pass\n    const processed = new Set<string>()\n    const queue: string[] = [...startTasks.map(t => t.id)]\n\n    while (queue.length > 0) {\n      const taskId = queue.shift()!\n      if (processed.has(taskId)) continue\n\n      const task = taskMap.get(taskId)!\n      const predecessors = this.getPredecessors(taskId, project)\n\n      // Check if all predecessors are processed\n      const allPredecessorsProcessed = predecessors.every(predId => processed.has(predId))\n      if (!allPredecessorsProcessed && predecessors.length > 0) {\n        queue.push(taskId) // Re-queue to process later\n        continue\n      }\n\n      // Calculate ES and EF based on dependency type\n      let es = 0\n      if (predecessors.length > 0) {\n        // Calculate ES based on all dependency types\n        const esValues = predecessors.map(predId => {\n          const dependency = this.getDependency(predId, taskId, project)\n          const depType = dependency?.type || \"finishToStart\"\n          const lag = dependency?.lagDays || 0\n          const predTask = taskMap.get(predId)!\n          const predES = earlyStart.get(predId) || 0\n          const predEF = earlyFinish.get(predId) || 0\n\n          switch (depType) {\n            case \"finishToStart\":\n              // FS: Successor starts after predecessor finishes + lag\n              return predEF + lag\n            case \"startToStart\":\n              // SS: Successor starts when predecessor starts + lag\n              return predES + lag\n            case \"finishToFinish\":\n              // FF: Successor finishes when predecessor finishes + lag\n              // ES = EF - duration (to ensure successor finishes at the right time)\n              const requiredEF = predEF + lag\n              return Math.max(0, requiredEF - task.duration)\n            case \"startToFinish\":\n              // SF: Successor finishes when predecessor starts + lag\n              // ES = predecessor ES + lag - duration\n              return Math.max(0, (predES + lag) - task.duration)\n            default:\n              return predEF + lag\n          }\n        })\n        es = Math.max(...esValues, 0) // Ensure ES >= 0\n      }\n\n      // Apply task constraints\n      if (task.constraintType && task.constraintDate) {\n        const projectStartDate = new Date(project.startDate)\n        const constraintDate = new Date(task.constraintDate)\n        const constraintDays = Math.ceil((constraintDate.getTime() - projectStartDate.getTime()) / (1000 * 60 * 60 * 24))\n\n        switch (task.constraintType) {\n          case \"mustStartOn\":\n          case \"startNoEarlierThan\":\n            es = Math.max(es, constraintDays)\n            break\n          case \"startNoLaterThan\":\n            es = Math.min(es, constraintDays)\n            break\n          case \"mustFinishOn\":\n          case \"finishNoEarlierThan\":\n            es = Math.max(es, constraintDays - task.duration)\n            break\n          case \"finishNoLaterThan\":\n            es = Math.min(es, constraintDays - task.duration)\n            break\n        }\n      }\n\n      earlyStart.set(taskId, es)\n      earlyFinish.set(taskId, es + task.duration)\n      processed.add(taskId)\n\n      // Add successors to queue\n      const successors = this.getSuccessors(taskId, project)\n      successors.forEach(succId => {\n        if (!processed.has(succId) && !queue.includes(succId)) {\n          queue.push(succId)\n        }\n      })\n    }\n\n    // Calculate project duration\n    const projectDuration = Math.max(...Array.from(earlyFinish.values()))\n\n    // Backward Pass: Calculate Late Start (LS) and Late Finish (LF)\n    const lateFinish = new Map<string, number>()\n    const lateStart = new Map<string, number>()\n\n    // Find tasks with no successors (end tasks)\n    const endTasks = project.tasks.filter(task => {\n      const successors = this.getSuccessors(task.id, project)\n      return successors.length === 0\n    })\n\n    // Initialize end tasks\n    endTasks.forEach(task => {\n      lateFinish.set(task.id, projectDuration)\n      lateStart.set(task.id, projectDuration - task.duration)\n    })\n\n    // Reverse topological sort for backward pass\n    const reverseProcessed = new Set<string>()\n    const reverseQueue: string[] = [...endTasks.map(t => t.id)]\n\n    while (reverseQueue.length > 0) {\n      const taskId = reverseQueue.shift()!\n      if (reverseProcessed.has(taskId)) continue\n\n      const task = taskMap.get(taskId)!\n      const successors = this.getSuccessors(taskId, project)\n\n      // Check if all successors are processed\n      const allSuccessorsProcessed = successors.every(succId => reverseProcessed.has(succId))\n      if (!allSuccessorsProcessed && successors.length > 0) {\n        reverseQueue.push(taskId)\n        continue\n      }\n\n      // Calculate LF and LS based on dependency type (MS Project algorithm)\n      let lf = projectDuration\n      if (successors.length > 0) {\n        // Calculate LF based on all dependency types\n        const lfValues = successors.map(succId => {\n          const dependency = this.getDependency(taskId, succId, project)\n          const depType = dependency?.type || \"finishToStart\"\n          const lag = dependency?.lagDays || 0\n          const succTask = taskMap.get(succId)!\n          const succES = earlyStart.get(succId) ?? projectDuration\n          const succLS = lateStart.get(succId) ?? projectDuration\n          const succEF = earlyFinish.get(succId) ?? projectDuration\n          const succLF = lateFinish.get(succId) ?? projectDuration\n\n          switch (depType) {\n            case \"finishToStart\":\n              // FS: Predecessor must finish before successor starts\n              // LF = successor LS - lag\n              return succLS - lag\n            case \"startToStart\":\n              // SS: Predecessor must start before successor starts\n              // LF = successor LS - lag + task duration (to ensure predecessor finishes in time)\n              // Actually: LF = LS + duration, where LS = succLS - lag\n              const requiredLS = succLS - lag\n              return requiredLS + task.duration\n            case \"finishToFinish\":\n              // FF: Predecessor must finish before successor finishes\n              // LF = successor LF - lag\n              return succLF - lag\n            case \"startToFinish\":\n              // SF: Predecessor must start before successor finishes\n              // LF = successor LF - lag + task duration\n              const requiredLS_SF = succLF - lag\n              return requiredLS_SF + task.duration\n            default:\n              return succLS - lag\n          }\n        })\n        lf = Math.min(...lfValues, projectDuration)\n      }\n\n      // Apply task constraints for backward pass\n      if (task.constraintType && task.constraintDate) {\n        const projectStartDate = new Date(project.startDate)\n        const constraintDate = new Date(task.constraintDate)\n        const constraintDays = Math.ceil((constraintDate.getTime() - projectStartDate.getTime()) / (1000 * 60 * 60 * 24))\n\n        switch (task.constraintType) {\n          case \"mustStartOn\":\n          case \"startNoLaterThan\":\n            lf = Math.min(lf, constraintDays + task.duration)\n            break\n          case \"startNoEarlierThan\":\n            lf = Math.max(lf, constraintDays + task.duration)\n            break\n          case \"mustFinishOn\":\n          case \"finishNoLaterThan\":\n            lf = Math.min(lf, constraintDays)\n            break\n          case \"finishNoEarlierThan\":\n            lf = Math.max(lf, constraintDays)\n            break\n        }\n      }\n\n      lateFinish.set(taskId, lf)\n      lateStart.set(taskId, lf - task.duration)\n      reverseProcessed.add(taskId)\n\n      // Add predecessors to queue\n      const predecessors = this.getPredecessors(taskId, project)\n      predecessors.forEach(predId => {\n        if (!reverseProcessed.has(predId) && !reverseQueue.includes(predId)) {\n          reverseQueue.push(predId)\n        }\n      })\n    }\n\n    // Calculate Float/Slack and identify critical path\n    const criticalPath: string[] = []\n\n    project.tasks.forEach(task => {\n      const es = earlyStart.get(task.id) || 0\n      const ef = earlyFinish.get(task.id) || 0\n      const ls = lateStart.get(task.id) || 0\n      const lf = lateFinish.get(task.id) || 0\n\n      // Total Float = LS - ES = LF - EF\n      const totalFloat = ls - es\n\n      // Free Float calculation (MS Project style)\n      // Free Float = min(ES of immediate successors) - EF\n      const successors = this.getSuccessors(task.id, project)\n      let freeFloat = totalFloat\n      if (successors.length > 0) {\n        const freeFloatValues = successors.map(succId => {\n          const dependency = this.getDependency(task.id, succId, project)\n          const depType = dependency?.type || \"finishToStart\"\n          const lag = dependency?.lagDays || 0\n          const succES = earlyStart.get(succId) || 0\n          const succTask = taskMap.get(succId)!\n\n          switch (depType) {\n            case \"finishToStart\":\n              // FF = successor ES - current EF\n              return succES - ef - lag\n            case \"startToStart\":\n              // FF = successor ES - current ES - lag\n              return succES - es - lag\n            case \"finishToFinish\":\n              // FF = successor EF - current EF - lag\n              const succEF = earlyFinish.get(succId) || 0\n              return succEF - ef - lag\n            case \"startToFinish\":\n              // FF = successor EF - current ES - lag\n              const succEF2 = earlyFinish.get(succId) || 0\n              return succEF2 - es - lag\n            default:\n              return succES - ef - lag\n          }\n        })\n        freeFloat = Math.max(0, Math.min(...freeFloatValues))\n      }\n\n      // Task is critical if Total Float = 0\n      const isCritical = totalFloat === 0\n\n      if (isCritical) {\n        criticalPath.push(task.id)\n      }\n\n      scheduleData.set(task.id, {\n        taskId: task.id,\n        earlyStart: es,\n        earlyFinish: ef,\n        lateStart: ls,\n        lateFinish: lf,\n        totalFloat,\n        freeFloat,\n        isCritical\n      })\n    })\n\n    // Sort critical path by early start\n    criticalPath.sort((a, b) => {\n      const esA = scheduleData.get(a)?.earlyStart || 0\n      const esB = scheduleData.get(b)?.earlyStart || 0\n      return esA - esB\n    })\n\n    return {\n      scheduleData,\n      criticalPath,\n      projectDuration,\n      isValid: true,\n      errors: []\n    }\n  }\n\n  /**\n   * Get all predecessor task IDs for a given task\n   */\n  static getPredecessors(taskId: string, project: Project): string[] {\n    const task = project.tasks.find(t => t.id === taskId)\n    if (!task) return []\n\n    // Get from task dependencies\n    const deps = task.dependencies || []\n\n    // Also check project dependencies\n    const projectDeps = project.dependencies?.filter(d => d.toTaskId === taskId) || []\n    const depPredecessors = projectDeps.map(d => d.fromTaskId)\n\n    // Combine and deduplicate\n    return Array.from(new Set([...deps, ...depPredecessors]))\n  }\n\n  /**\n   * Get all successor task IDs for a given task\n   */\n  static getSuccessors(taskId: string, project: Project): string[] {\n    // Find tasks that have this task as a dependency\n    const dependentTasks = project.tasks.filter(task =>\n      (task.dependencies || []).includes(taskId)\n    )\n\n    // Also check project dependencies\n    const projectDeps = project.dependencies?.filter(d => d.fromTaskId === taskId) || []\n    const depSuccessors = projectDeps.map(d => d.toTaskId)\n\n    // Combine and deduplicate\n    return Array.from(new Set([\n      ...dependentTasks.map(t => t.id),\n      ...depSuccessors\n    ]))\n  }\n\n  /**\n   * Get dependency between two tasks\n   */\n  static getDependency(fromTaskId: string, toTaskId: string, project: Project): Dependency | null {\n    // Check project dependencies first\n    const projectDep = project.dependencies?.find(d =>\n      d.fromTaskId === fromTaskId && d.toTaskId === toTaskId\n    )\n    if (projectDep) return projectDep\n\n    // Check if it's in task dependencies (default finish-to-start, no lag)\n    const toTask = project.tasks.find(t => t.id === toTaskId)\n    if (toTask?.dependencies?.includes(fromTaskId)) {\n      return {\n        id: `dep-${fromTaskId}-${toTaskId}`,\n        fromTaskId,\n        toTaskId,\n        type: \"finishToStart\",\n        lagDays: 0\n      }\n    }\n\n    return null\n  }\n\n  /**\n   * Validate dependencies for cycles and invalid references\n   */\n  static validateDependencies(project: Project): { isValid: boolean; errors: string[] } {\n    const errors: string[] = []\n    const taskIds = new Set(project.tasks.map(t => t.id))\n\n    // Check for invalid task references\n    project.tasks.forEach(task => {\n      (task.dependencies || []).forEach(depId => {\n        if (!taskIds.has(depId)) {\n          errors.push(`Task \"${task.name}\" references invalid dependency \"${depId}\"`)\n        }\n      })\n    })\n\n    // Check project dependencies\n    project.dependencies?.forEach(dep => {\n      if (!taskIds.has(dep.fromTaskId)) {\n        errors.push(`Dependency references invalid from-task \"${dep.fromTaskId}\"`)\n      }\n      if (!taskIds.has(dep.toTaskId)) {\n        errors.push(`Dependency references invalid to-task \"${dep.toTaskId}\"`)\n      }\n      if (dep.fromTaskId === dep.toTaskId) {\n        errors.push(`Task \"${dep.fromTaskId}\" cannot depend on itself`)\n      }\n    })\n\n    // Check for cycles using DFS\n    const visited = new Set<string>()\n    const recursionStack = new Set<string>()\n\n    const hasCycle = (taskId: string): boolean => {\n      visited.add(taskId)\n      recursionStack.add(taskId)\n\n      const predecessors = this.getPredecessors(taskId, project)\n      for (const predId of predecessors) {\n        if (!visited.has(predId)) {\n          if (hasCycle(predId)) return true\n        } else if (recursionStack.has(predId)) {\n          return true // Cycle detected\n        }\n      }\n\n      recursionStack.delete(taskId)\n      return false\n    }\n\n    for (const task of project.tasks) {\n      if (!visited.has(task.id)) {\n        if (hasCycle(task.id)) {\n          errors.push(`Circular dependency detected involving task \"${task.name}\"`)\n          break\n        }\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    }\n  }\n\n  /**\n   * Update task dates based on critical path calculations\n   */\n  static updateTaskDates(project: Project): Project {\n    const result = this.calculateCriticalPath(project)\n\n    if (!result.isValid) {\n      console.warn(\"Cannot update task dates due to validation errors:\", result.errors)\n      return project\n    }\n\n    const projectStartDate = new Date(project.startDate)\n\n    // Update tasks with calculated dates\n    const updatedTasks = project.tasks.map(task => {\n      const schedule = result.scheduleData.get(task.id)\n      if (!schedule) return task\n\n      const startDate = new Date(projectStartDate)\n      startDate.setDate(startDate.getDate() + schedule.earlyStart)\n\n      const endDate = new Date(projectStartDate)\n      endDate.setDate(endDate.getDate() + schedule.earlyFinish)\n\n      return {\n        ...task,\n        startDate: startDate.toISOString(),\n        endDate: endDate.toISOString(),\n        earlyStart: schedule.earlyStart,\n        earlyFinish: schedule.earlyFinish,\n        lateStart: schedule.lateStart,\n        lateFinish: schedule.lateFinish,\n        floatDays: schedule.totalFloat,\n        freeFloatDays: schedule.freeFloat,\n        isCriticalPath: schedule.isCritical,\n        predecessors: this.getPredecessors(task.id, project),\n        successors: this.getSuccessors(task.id, project)\n      }\n    })\n\n    return {\n      ...project,\n      tasks: updatedTasks,\n      criticalPath: result.criticalPath,\n      duration: result.projectDuration\n    }\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6312, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/lib/critical-path-validator.ts"],"sourcesContent":["/**\n * Critical Path Validator\n * Validates critical path calculations match MS Project behavior\n */\n\nimport { NetworkDiagramService } from \"./network-diagram-service\"\nimport type { Project } from \"./types\"\n\nexport interface ValidationResult {\n  isValid: boolean\n  errors: string[]\n  warnings: string[]\n  details: {\n    projectDuration: number\n    criticalPathLength: number\n    tasksWithFloat: number\n    tasksOnCriticalPath: number\n  }\n}\n\n/**\n * Validate critical path calculations\n */\nexport function validateCriticalPath(project: Project): ValidationResult {\n  const errors: string[] = []\n  const warnings: string[] = []\n\n  const result = NetworkDiagramService.calculateCriticalPath(project)\n\n  if (!result.isValid) {\n    return {\n      isValid: false,\n      errors: result.errors,\n      warnings: [],\n      details: {\n        projectDuration: 0,\n        criticalPathLength: 0,\n        tasksWithFloat: 0,\n        tasksOnCriticalPath: 0,\n      }\n    }\n  }\n\n  // Validation checks\n  let tasksWithFloat = 0\n  let tasksOnCriticalPath = 0\n\n  project.tasks.forEach(task => {\n    const schedule = result.scheduleData.get(task.id)\n    if (!schedule) {\n      errors.push(`Task \"${task.name}\" missing schedule data`)\n      return\n    }\n\n    // Validate ES <= EF\n    if (schedule.earlyStart > schedule.earlyFinish) {\n      errors.push(`Task \"${task.name}\": ES(${schedule.earlyStart}) > EF(${schedule.earlyFinish})`)\n    }\n\n    // Validate LS <= LF\n    if (schedule.lateStart > schedule.lateFinish) {\n      errors.push(`Task \"${task.name}\": LS(${schedule.lateStart}) > LF(${schedule.lateFinish})`)\n    }\n\n    // Validate EF = ES + duration\n    const calculatedEF = schedule.earlyStart + task.duration\n    if (Math.abs(schedule.earlyFinish - calculatedEF) > 0.01) {\n      errors.push(`Task \"${task.name}\": EF(${schedule.earlyFinish}) != ES(${schedule.earlyStart}) + Duration(${task.duration})`)\n    }\n\n    // Validate LF = LS + duration\n    const calculatedLF = schedule.lateStart + task.duration\n    if (Math.abs(schedule.lateFinish - calculatedLF) > 0.01) {\n      errors.push(`Task \"${task.name}\": LF(${schedule.lateFinish}) != LS(${schedule.lateStart}) + Duration(${task.duration})`)\n    }\n\n    // Validate Total Float = LS - ES = LF - EF\n    const float1 = schedule.lateStart - schedule.earlyStart\n    const float2 = schedule.lateFinish - schedule.earlyFinish\n    if (Math.abs(schedule.totalFloat - float1) > 0.01 || Math.abs(schedule.totalFloat - float2) > 0.01) {\n      errors.push(`Task \"${task.name}\": Total Float calculation incorrect`)\n    }\n\n    // Validate critical path: Float = 0 for critical tasks\n    if (schedule.isCritical && schedule.totalFloat !== 0) {\n      errors.push(`Task \"${task.name}\": Marked as critical but has float ${schedule.totalFloat}`)\n    }\n\n    // Validate non-critical tasks have float > 0\n    if (!schedule.isCritical && schedule.totalFloat === 0) {\n      warnings.push(`Task \"${task.name}\": Not marked as critical but has zero float`)\n    }\n\n    if (schedule.totalFloat > 0) {\n      tasksWithFloat++\n    }\n\n    if (schedule.isCritical) {\n      tasksOnCriticalPath++\n    }\n  })\n\n  // Validate critical path is continuous\n  const criticalPath = result.criticalPath\n  for (let i = 0; i < criticalPath.length - 1; i++) {\n    const currentTask = project.tasks.find(t => t.id === criticalPath[i])\n    const nextTask = project.tasks.find(t => t.id === criticalPath[i + 1])\n\n    if (currentTask && nextTask) {\n      const currentSchedule = result.scheduleData.get(currentTask.id)!\n      const nextSchedule = result.scheduleData.get(nextTask.id)!\n\n      // Check if there's a dependency\n      const hasDependency =\n        (currentTask.dependencies || []).includes(nextTask.id) ||\n        project.dependencies?.some(d => d.fromTaskId === currentTask.id && d.toTaskId === nextTask.id)\n\n      if (!hasDependency) {\n        warnings.push(`Critical path may have gaps: ${currentTask.name} -> ${nextTask.name}`)\n      }\n\n      // Validate EF of current = ES of next (for FS dependencies)\n      const dep = NetworkDiagramService.getDependency(currentTask.id, nextTask.id, project)\n      if (dep?.type === \"finishToStart\" && dep.lagDays === 0) {\n        if (currentSchedule.earlyFinish !== nextSchedule.earlyStart) {\n          warnings.push(`Critical path timing mismatch: ${currentTask.name}.EF(${currentSchedule.earlyFinish}) != ${nextTask.name}.ES(${nextSchedule.earlyStart})`)\n        }\n      }\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    warnings,\n    details: {\n      projectDuration: result.projectDuration,\n      criticalPathLength: criticalPath.length,\n      tasksWithFloat,\n      tasksOnCriticalPath,\n    }\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6424, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/network-diagram-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { ZoomIn, ZoomOut, Maximize2, Minimize2, Network, RefreshCw } from \"lucide-react\"\nimport type { Project, Task, Dependency } from \"@/lib/types\"\nimport { useState, useMemo, useEffect } from \"react\"\nimport { NetworkDiagramService } from \"@/lib/network-diagram-service\"\nimport { validateCriticalPath } from \"@/lib/critical-path-validator\"\nimport { updateProject } from \"@/lib/storage\"\n\ninterface NetworkDiagramViewProps {\n  project: Project\n}\n\ninterface Node {\n  id: string\n  task: Task\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\ninterface Edge {\n  from: string\n  to: string\n  dependency: Dependency\n  fromNode: Node\n  toNode: Node\n}\n\n/**\n * MS Project-style Network Diagram View\n * Displays tasks as boxes with ES, EF, LS, LF, Duration, Float\n */\nexport function NetworkDiagramView({ project }: NetworkDiagramViewProps) {\n  const [zoom, setZoom] = useState(1)\n  const [panX, setPanX] = useState(0)\n  const [panY, setPanY] = useState(0)\n  const [isFullScreen, setIsFullScreen] = useState(false)\n  const [isDragging, setIsDragging] = useState(false)\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 })\n  const [showFloat, setShowFloat] = useState(true)\n  const [showDates, setShowDates] = useState(true)\n\n  // Calculate critical path using NetworkDiagramService\n  const networkResult = useMemo(() => {\n    return NetworkDiagramService.calculateCriticalPath(project)\n  }, [project.tasks, project.dependencies])\n\n  // Validate critical path calculations\n  const validationResult = useMemo(() => {\n    return validateCriticalPath(project)\n  }, [project.tasks, project.dependencies])\n\n  // Update project when calculations are valid\n  useEffect(() => {\n    if (networkResult.isValid) {\n      const updated = NetworkDiagramService.updateTaskDates(project)\n      if (JSON.stringify(updated) !== JSON.stringify(project)) {\n        updateProject(updated)\n      }\n    }\n  }, [networkResult.isValid])\n\n  // Calculate network diagram layout - MS Project style\n  const { nodes, edges, criticalTasks, scheduleData } = useMemo(() => {\n    if (!networkResult.isValid) {\n      return { nodes: [], edges: [], criticalTasks: new Set<string>(), scheduleData: new Map() }\n    }\n\n    const taskMap = new Map<string, Task>()\n    project.tasks.forEach((task) => {\n      taskMap.set(task.id, task)\n    })\n\n    // Build edges from dependencies\n    const edgeList: Edge[] = []\n\n    // Add edges from project dependencies\n    project.dependencies?.forEach(dep => {\n      const fromTask = taskMap.get(dep.fromTaskId)\n      const toTask = taskMap.get(dep.toTaskId)\n      if (fromTask && toTask) {\n        edgeList.push({\n          from: dep.fromTaskId,\n          to: dep.toTaskId,\n          dependency: dep,\n          fromNode: { id: dep.fromTaskId, task: fromTask, x: 0, y: 0, width: 0, height: 0 },\n          toNode: { id: dep.toTaskId, task: toTask, x: 0, y: 0, width: 0, height: 0 },\n        })\n      }\n    })\n\n    // Add edges from task dependencies (if not already in project dependencies)\n    project.tasks.forEach((task) => {\n      if (task.dependencies && task.dependencies.length > 0) {\n        task.dependencies.forEach((depId) => {\n          if (!edgeList.some(e => e.from === depId && e.to === task.id)) {\n            const fromTask = taskMap.get(depId)\n            if (fromTask) {\n              edgeList.push({\n                from: depId,\n                to: task.id,\n                dependency: {\n                  id: `dep-${depId}-${task.id}`,\n                  fromTaskId: depId,\n                  toTaskId: task.id,\n                  type: \"finishToStart\",\n                  lagDays: 0\n                },\n                fromNode: { id: depId, task: fromTask, x: 0, y: 0, width: 0, height: 0 },\n                toNode: { id: task.id, task, x: 0, y: 0, width: 0, height: 0 },\n              })\n            }\n          }\n        })\n      }\n    })\n\n    // Layout algorithm: Position nodes based on early start (horizontal) and topological level (vertical)\n    const scheduleData = networkResult.scheduleData\n    const criticalTasks = new Set(networkResult.criticalPath)\n\n    // Group tasks by early start (rounded to nearest day for grouping)\n    const timeGroups = new Map<number, string[]>()\n    project.tasks.forEach(task => {\n      const es = scheduleData.get(task.id)?.earlyStart || 0\n      const timeGroup = Math.floor(es / 5) * 5 // Group by 5-day intervals\n      if (!timeGroups.has(timeGroup)) {\n        timeGroups.set(timeGroup, [])\n      }\n      timeGroups.get(timeGroup)!.push(task.id)\n    })\n\n    // Calculate vertical levels using topological sort\n    const levels = new Map<string, number>()\n    const visited = new Set<string>()\n\n    const assignLevel = (taskId: string, level: number) => {\n      if (visited.has(taskId)) {\n        levels.set(taskId, Math.max(levels.get(taskId) || 0, level))\n        return\n      }\n      visited.add(taskId)\n      levels.set(taskId, level)\n\n      const successors = NetworkDiagramService.getSuccessors(taskId, project)\n      successors.forEach(succId => {\n        assignLevel(succId, level + 1)\n      })\n    }\n\n    // Start with tasks that have no predecessors\n    const startTasks = project.tasks.filter(t => {\n      const preds = NetworkDiagramService.getPredecessors(t.id, project)\n      return preds.length === 0\n    })\n\n    startTasks.forEach(task => assignLevel(task.id, 0))\n\n    // Position nodes\n    const nodeWidth = 180\n    const nodeHeight = 100\n    const horizontalSpacing = 250\n    const verticalSpacing = 150\n    const nodes: Node[] = []\n\n    // Group by level, then by time\n    const levelGroups = new Map<number, string[]>()\n    levels.forEach((level, taskId) => {\n      if (!levelGroups.has(level)) {\n        levelGroups.set(level, [])\n      }\n      levelGroups.get(level)!.push(taskId)\n    })\n\n    Array.from(levelGroups.entries())\n      .sort(([a], [b]) => a - b)\n      .forEach(([level, taskIds]) => {\n        // Sort by early start within level\n        taskIds.sort((a, b) => {\n          const esA = scheduleData.get(a)?.earlyStart || 0\n          const esB = scheduleData.get(b)?.earlyStart || 0\n          return esA - esB\n        })\n\n        const tasksInLevel = taskIds.length\n        const totalWidth = tasksInLevel * horizontalSpacing\n        const startX = -totalWidth / 2 + horizontalSpacing / 2\n\n        taskIds.forEach((taskId, index) => {\n          const task = taskMap.get(taskId)!\n          const x = startX + index * horizontalSpacing\n          const y = level * verticalSpacing\n\n          nodes.push({\n            id: taskId,\n            task,\n            x,\n            y,\n            width: nodeWidth,\n            height: nodeHeight,\n          })\n        })\n      })\n\n    // Update edge nodes\n    edgeList.forEach(edge => {\n      edge.fromNode = nodes.find(n => n.id === edge.from) || edge.fromNode\n      edge.toNode = nodes.find(n => n.id === edge.to) || edge.toNode\n    })\n\n    return {\n      nodes,\n      edges: edgeList,\n      criticalTasks,\n      scheduleData\n    }\n  }, [project.tasks, project.dependencies, networkResult])\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (e.button === 0) {\n      setIsDragging(true)\n      setDragStart({ x: e.clientX - panX, y: e.clientY - panY })\n    }\n  }\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (isDragging) {\n      setPanX(e.clientX - dragStart.x)\n      setPanY(e.clientY - dragStart.y)\n    }\n  }\n\n  const handleMouseUp = () => {\n    setIsDragging(false)\n  }\n\n  const zoomIn = () => setZoom(Math.min(3, zoom + 0.2))\n  const zoomOut = () => setZoom(Math.max(0.5, zoom - 0.2))\n  const resetView = () => {\n    setZoom(1)\n    setPanX(0)\n    setPanY(0)\n  }\n\n  // Calculate viewport bounds\n  const minX = nodes.length > 0 ? Math.min(...nodes.map((n) => n.x)) - 200 : -500\n  const maxX = nodes.length > 0 ? Math.max(...nodes.map((n) => n.x + n.width)) + 200 : 500\n  const minY = nodes.length > 0 ? Math.min(...nodes.map((n) => n.y)) - 200 : -500\n  const maxY = nodes.length > 0 ? Math.max(...nodes.map((n) => n.y + n.height)) + 200 : 500\n  const viewBoxWidth = maxX - minX || 1000\n  const viewBoxHeight = maxY - minY || 1000\n\n  const formatDate = (days: number) => {\n    const date = new Date(project.startDate)\n    date.setDate(date.getDate() + days)\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"gradient-card border-l-4 border-l-chart-3 shadow-lg\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-2xl flex items-center gap-2\">\n                <Network className=\"size-6 text-chart-3\" />\n                Network Diagram (MS Project Style)\n              </CardTitle>\n              <CardDescription className=\"text-base mt-1\">\n                Precedence Diagramming Method (PDM) with critical path analysis\n              </CardDescription>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowFloat(!showFloat)}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                {showFloat ? \"Hide\" : \"Show\"} Float\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowDates(!showDates)}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                {showDates ? \"Hide\" : \"Show\"} Dates\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={zoomOut}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <ZoomOut className=\"size-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={zoomIn}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                <ZoomIn className=\"size-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={resetView}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                Reset\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setIsFullScreen(!isFullScreen)}\n                className=\"gap-2 border-primary/30 hover:bg-primary/10 bg-transparent\"\n              >\n                {isFullScreen ? <Minimize2 className=\"size-4\" /> : <Maximize2 className=\"size-4\" />}\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {(!networkResult.isValid || !validationResult.isValid) && (\n            <div className=\"mb-4 p-4 bg-destructive/10 border border-destructive rounded-lg\">\n              <p className=\"text-destructive font-semibold\">Validation Errors:</p>\n              <ul className=\"list-disc list-inside mt-2 text-sm space-y-1\">\n                {networkResult.errors.map((error, i) => (\n                  <li key={i}>{error}</li>\n                ))}\n                {validationResult.errors.map((error, i) => (\n                  <li key={`val-${i}`}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {validationResult.warnings.length > 0 && (\n            <div className=\"mb-4 p-4 bg-yellow-500/10 border border-yellow-500 rounded-lg\">\n              <p className=\"text-yellow-700 font-semibold\">Validation Warnings:</p>\n              <ul className=\"list-disc list-inside mt-2 text-sm space-y-1\">\n                {validationResult.warnings.map((warning, i) => (\n                  <li key={i}>{warning}</li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {networkResult.isValid && validationResult.isValid && (\n            <div className=\"mb-4 p-4 bg-green-500/10 border border-green-500 rounded-lg\">\n              <p className=\"text-green-700 font-semibold\"> Critical Path Validated</p>\n              <div className=\"mt-2 text-sm text-green-700\">\n                <div>Project Duration: {validationResult.details.projectDuration} days</div>\n                <div>Critical Tasks: {validationResult.details.tasksOnCriticalPath}</div>\n                <div>Tasks with Float: {validationResult.details.tasksWithFloat}</div>\n              </div>\n            </div>\n          )}\n\n          <div\n            className={`relative border-2 border-dashed border-border rounded-lg bg-gradient-to-br from-background to-muted/20 overflow-hidden ${isFullScreen ? \"h-[800px]\" : \"h-[600px]\"\n              }`}\n            onMouseDown={handleMouseDown}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseUp}\n            style={{ cursor: isDragging ? \"grabbing\" : \"grab\" }}\n          >\n            <svg\n              width=\"100%\"\n              height=\"100%\"\n              viewBox={`${minX} ${minY} ${viewBoxWidth} ${viewBoxHeight}`}\n              preserveAspectRatio=\"xMidYMid meet\"\n              style={{\n                transform: `translate(${panX}px, ${panY}px) scale(${zoom})`,\n                transformOrigin: \"center center\",\n              }}\n            >\n              <defs>\n                <marker\n                  id=\"arrowhead\"\n                  markerWidth=\"10\"\n                  markerHeight=\"10\"\n                  refX=\"9\"\n                  refY=\"3\"\n                  orient=\"auto\"\n                >\n                  <polygon points=\"0 0, 10 3, 0 6\" fill=\"#64748b\" />\n                </marker>\n                <marker\n                  id=\"arrowhead-critical\"\n                  markerWidth=\"10\"\n                  markerHeight=\"10\"\n                  refX=\"9\"\n                  refY=\"3\"\n                  orient=\"auto\"\n                >\n                  <polygon points=\"0 0, 10 3, 0 6\" fill=\"#ef4444\" />\n                </marker>\n              </defs>\n\n              {/* Draw edges (dependencies) */}\n              {edges.map((edge, index) => {\n                if (!edge.fromNode || !edge.toNode || edge.fromNode.x === 0 || edge.toNode.x === 0) return null\n\n                const fromX = edge.fromNode.x + edge.fromNode.width\n                const fromY = edge.fromNode.y + edge.fromNode.height / 2\n                const toX = edge.toNode.x\n                const toY = edge.toNode.y + edge.toNode.height / 2\n\n                const isCritical =\n                  criticalTasks.has(edge.from) && criticalTasks.has(edge.to)\n\n                // Calculate curved path\n                const midX = (fromX + toX) / 2\n                const controlPoint1X = fromX + (toX - fromX) * 0.5\n                const controlPoint1Y = fromY\n                const controlPoint2X = toX - (toX - fromX) * 0.5\n                const controlPoint2Y = toY\n\n                return (\n                  <g key={`edge-${index}`}>\n                    <path\n                      d={`M ${fromX} ${fromY} C ${controlPoint1X} ${controlPoint1Y}, ${controlPoint2X} ${controlPoint2Y}, ${toX} ${toY}`}\n                      fill=\"none\"\n                      stroke={isCritical ? \"#ef4444\" : \"#64748b\"}\n                      strokeWidth={isCritical ? 3 : 2}\n                      strokeDasharray={isCritical ? \"0\" : \"5,5\"}\n                      markerEnd={isCritical ? \"url(#arrowhead-critical)\" : \"url(#arrowhead)\"}\n                      opacity={0.7}\n                    />\n                    {/* Lag/Lead indicator */}\n                    {edge.dependency.lagDays !== 0 && (\n                      <text\n                        x={midX}\n                        y={(fromY + toY) / 2 - 10}\n                        textAnchor=\"middle\"\n                        className=\"text-xs fill-muted-foreground\"\n                        style={{ fontSize: \"10px\" }}\n                      >\n                        {edge.dependency.lagDays > 0 ? `+${edge.dependency.lagDays}d` : `${edge.dependency.lagDays}d`}\n                      </text>\n                    )}\n                  </g>\n                )\n              })}\n\n              {/* Draw nodes (tasks) - MS Project style boxes */}\n              {nodes.map((node) => {\n                const isCritical = criticalTasks.has(node.id)\n                const schedule = scheduleData.get(node.id)\n                const isMilestone = node.task.isMilestone || node.task.duration === 0\n                const isSummary = node.task.isSummary || project.tasks.some(t => t.parentId === node.id)\n\n                // MS Project box layout\n                return (\n                  <g key={node.id} className=\"cursor-pointer\">\n                    {/* Task box - MS Project style */}\n                    <rect\n                      x={node.x}\n                      y={node.y}\n                      width={node.width}\n                      height={node.height}\n                      rx=\"4\"\n                      fill={isCritical ? \"#fee2e2\" : isSummary ? \"#e0e7ff\" : \"#ffffff\"}\n                      stroke={isCritical ? \"#ef4444\" : isSummary ? \"#6366f1\" : \"#cbd5e1\"}\n                      strokeWidth={isCritical ? 3 : isSummary ? 2 : 2}\n                      className=\"transition-all hover:shadow-xl\"\n                      style={{\n                        filter: isCritical ? \"drop-shadow(0 4px 6px rgba(239, 68, 68, 0.3))\" : \"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))\"\n                      }}\n                    />\n\n                    {/* Milestone indicator (diamond shape) - MS Project style */}\n                    {isMilestone && (\n                      <polygon\n                        points={`${node.x + node.width / 2},${node.y + 5} ${node.x + node.width - 5},${node.y + node.height / 2} ${node.x + node.width / 2},${node.y + node.height - 5} ${node.x + 5},${node.y + node.height / 2}`}\n                        fill={isCritical ? \"#ef4444\" : \"#6366f1\"}\n                        stroke={isCritical ? \"#dc2626\" : \"#4f46e5\"}\n                        strokeWidth={2}\n                      />\n                    )}\n\n                    {/* MS Project Box Layout */}\n                    {/* Top section: ID and Name */}\n                    <rect\n                      x={node.x}\n                      y={node.y}\n                      width={node.width}\n                      height={25}\n                      fill={isCritical ? \"#fee2e2\" : \"#f8fafc\"}\n                      stroke=\"none\"\n                    />\n                    <line\n                      x1={node.x}\n                      y1={node.y + 25}\n                      x2={node.x + node.width}\n                      y2={node.y + 25}\n                      stroke=\"#cbd5e1\"\n                      strokeWidth={1}\n                    />\n\n                    {/* Task ID - Top Left */}\n                    <text\n                      x={node.x + 5}\n                      y={node.y + 15}\n                      className=\"text-xs font-bold fill-foreground\"\n                      style={{ fontSize: \"10px\" }}\n                    >\n                      {node.task.wbsCode}\n                    </text>\n\n                    {/* Task Name - Top Center */}\n                    <text\n                      x={node.x + node.width / 2}\n                      y={node.y + 15}\n                      textAnchor=\"middle\"\n                      className=\"text-xs font-bold fill-foreground\"\n                      style={{ fontSize: \"10px\" }}\n                    >\n                      {node.task.name.length > 18\n                        ? node.task.name.substring(0, 18) + \"...\"\n                        : node.task.name}\n                    </text>\n\n                    {/* Middle section: Duration and Dates */}\n                    <rect\n                      x={node.x}\n                      y={node.y + 25}\n                      width={node.width}\n                      height={50}\n                      fill={isCritical ? \"#fee2e2\" : \"#ffffff\"}\n                      stroke=\"none\"\n                    />\n                    <line\n                      x1={node.x}\n                      y1={node.y + 50}\n                      x2={node.x + node.width}\n                      y2={node.y + 50}\n                      stroke=\"#cbd5e1\"\n                      strokeWidth={1}\n                    />\n                    <line\n                      x1={node.x + node.width / 2}\n                      y1={node.y + 25}\n                      x2={node.x + node.width / 2}\n                      y2={node.y + 75}\n                      stroke=\"#cbd5e1\"\n                      strokeWidth={1}\n                    />\n\n                    {/* Duration - Left side */}\n                    <text\n                      x={node.x + 5}\n                      y={node.y + 40}\n                      className=\"text-xs fill-muted-foreground font-semibold\"\n                      style={{ fontSize: \"9px\" }}\n                    >\n                      Dur: {node.task.duration}d\n                    </text>\n\n                    {/* Early Start - Top Left */}\n                    {showDates && schedule && (\n                      <text\n                        x={node.x + 5}\n                        y={node.y + 55}\n                        className=\"text-xs fill-muted-foreground\"\n                        style={{ fontSize: \"8px\" }}\n                      >\n                        ES: {schedule.earlyStart}\n                      </text>\n                    )}\n\n                    {/* Early Finish - Bottom Left */}\n                    {showDates && schedule && (\n                      <text\n                        x={node.x + 5}\n                        y={node.y + 70}\n                        className=\"text-xs fill-muted-foreground\"\n                        style={{ fontSize: \"8px\" }}\n                      >\n                        EF: {schedule.earlyFinish}\n                      </text>\n                    )}\n\n                    {/* Late Start - Top Right */}\n                    {showDates && schedule && (\n                      <text\n                        x={node.x + node.width / 2 + 5}\n                        y={node.y + 55}\n                        className=\"text-xs fill-muted-foreground\"\n                        style={{ fontSize: \"8px\" }}\n                      >\n                        LS: {schedule.lateStart}\n                      </text>\n                    )}\n\n                    {/* Late Finish - Bottom Right */}\n                    {showDates && schedule && (\n                      <text\n                        x={node.x + node.width / 2 + 5}\n                        y={node.y + 70}\n                        className=\"text-xs fill-muted-foreground\"\n                        style={{ fontSize: \"8px\" }}\n                      >\n                        LF: {schedule.lateFinish}\n                      </text>\n                    )}\n\n                    {/* Bottom section: Float */}\n                    <rect\n                      x={node.x}\n                      y={node.y + 75}\n                      width={node.width}\n                      height={25}\n                      fill={isCritical ? \"#fee2e2\" : schedule && schedule.totalFloat > 0 ? \"#eff6ff\" : \"#ffffff\"}\n                      stroke=\"none\"\n                    />\n\n                    {/* Float - Bottom Center */}\n                    {showFloat && schedule && (\n                      <text\n                        x={node.x + node.width / 2}\n                        y={node.y + 92}\n                        textAnchor=\"middle\"\n                        className={`text-xs font-bold ${schedule.totalFloat === 0 ? \"fill-red-600\" : \"fill-blue-600\"}`}\n                        style={{ fontSize: \"9px\" }}\n                      >\n                        {schedule.totalFloat === 0 ? \"CRITICAL\" : `Float: ${schedule.totalFloat}d`}\n                      </text>\n                    )}\n\n                    {/* Critical indicator */}\n                    {isCritical && (\n                      <circle\n                        cx={node.x + node.width - 10}\n                        cy={node.y + 10}\n                        r=\"5\"\n                        fill=\"#ef4444\"\n                      />\n                    )}\n                  </g>\n                )\n              })}\n            </svg>\n\n            {/* Legend */}\n            <div className=\"absolute bottom-4 left-4 bg-card/95 backdrop-blur-sm border border-border rounded-lg p-3 shadow-lg\">\n              <div className=\"text-sm font-semibold mb-2\">Legend</div>\n              <div className=\"space-y-1 text-xs\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded border-2 border-red-500 bg-red-50\"></div>\n                  <span>Critical Task</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded border-2 border-slate-300 bg-white\"></div>\n                  <span>Normal Task</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded border-2 border-indigo-500 bg-indigo-50\"></div>\n                  <span>Summary Task</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-0.5 bg-red-500\"></div>\n                  <span>Critical Path</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-0.5 bg-slate-400\"></div>\n                  <span>Non-Critical</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Critical Path Info */}\n            {networkResult.isValid && (\n              <div className=\"absolute top-4 right-4 bg-card/95 backdrop-blur-sm border border-border rounded-lg p-3 shadow-lg\">\n                <div className=\"text-sm font-semibold mb-2\">Critical Path</div>\n                <div className=\"text-xs space-y-1\">\n                  <div>Duration: <span className=\"font-bold\">{networkResult.projectDuration} days</span></div>\n                  <div>Tasks: <span className=\"font-bold\">{networkResult.criticalPath.length}</span></div>\n                  <div className=\"text-muted-foreground mt-2\">\n                    {networkResult.criticalPath.slice(0, 3).map((taskId, i) => {\n                      const task = project.tasks.find(t => t.id === taskId)\n                      return task ? (\n                        <div key={i} className=\"truncate\">{task.wbsCode}: {task.name.substring(0, 15)}...</div>\n                      ) : null\n                    })}\n                    {networkResult.criticalPath.length > 3 && (\n                      <div>+{networkResult.criticalPath.length - 3} more</div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7625, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,8OAAC,4KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE"}},
    {"offset": {"line": 7663, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,8KAAwB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 7716, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/resources-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\nimport { Edit2, Check, X } from \"lucide-react\"\nimport type { Project } from \"@/lib/types\"\nimport { updateProject } from \"@/lib/storage\"\n\ninterface ResourcesViewProps {\n  project: Project\n  onUpdate?: () => void\n}\n\nexport function ResourcesView({ project, onUpdate }: ResourcesViewProps) {\n  const [editingResource, setEditingResource] = useState<string | null>(null)\n  const [editValues, setEditValues] = useState<{ name: string; rate: number }>({ name: \"\", rate: 0 })\n\n  const startEdit = (resourceId: string, name: string, rate: number) => {\n    setEditingResource(resourceId)\n    setEditValues({ name, rate })\n  }\n\n  const saveEdit = (resourceId: string) => {\n    const updatedResources = project.resources.map((r) =>\n      r.id === resourceId ? { ...r, name: editValues.name, rate: editValues.rate } : r,\n    )\n    updateProject({ ...project, resources: updatedResources })\n    setEditingResource(null)\n    onUpdate?.()\n  }\n\n  const cancelEdit = () => {\n    setEditingResource(null)\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"gradient-card border-l-4 border-l-chart-4 shadow-lg\">\n        <CardHeader>\n          <CardTitle className=\"text-2xl flex items-center gap-2\">\n            <span className=\"size-2 rounded-full bg-gradient-to-r from-chart-4 to-success animate-pulse\" />\n            Resource Allocation\n          </CardTitle>\n          <CardDescription className=\"text-base\">\n            Team members and workload distribution (click to edit)\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-6\">\n            {project.resources.map((resource) => {\n              const assignedTasks = project.tasks.filter((t) => t.resource === resource.role)\n              const totalHours = assignedTasks.reduce((sum, t) => sum + t.duration * 8, 0)\n              const utilization = Math.min(Math.round((totalHours / (project.duration * 8)) * 100), 100)\n              const isEditing = editingResource === resource.id\n\n              const getUtilizationColor = (util: number) => {\n                if (util >= 90) return \"from-destructive to-chart-5\"\n                if (util >= 70) return \"from-chart-3 to-warning\"\n                return \"from-chart-4 to-success\"\n              }\n\n              return (\n                <div\n                  key={resource.id}\n                  className=\"space-y-3 p-4 rounded-xl bg-gradient-to-r from-background to-muted/30 border border-border hover:border-primary/30 transition-all group\"\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <Avatar className=\"size-12 border-2 border-primary/20\">\n                      <AvatarFallback\n                        className={`text-white font-bold bg-gradient-to-br ${getUtilizationColor(utilization)}`}\n                      >\n                        {resource.role.slice(0, 2).toUpperCase()}\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex-1\">\n                      {isEditing ? (\n                        <div className=\"flex items-center gap-2\">\n                          <Input\n                            value={editValues.name}\n                            onChange={(e) => setEditValues({ ...editValues, name: e.target.value })}\n                            className=\"h-8\"\n                          />\n                          <Input\n                            type=\"number\"\n                            value={editValues.rate}\n                            onChange={(e) =>\n                              setEditValues({ ...editValues, rate: Number.parseInt(e.target.value) || 0 })\n                            }\n                            className=\"w-24 h-8\"\n                          />\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-8 text-success\"\n                            onClick={() => saveEdit(resource.id)}\n                          >\n                            <Check className=\"size-4\" />\n                          </Button>\n                          <Button size=\"icon\" variant=\"ghost\" className=\"size-8 text-destructive\" onClick={cancelEdit}>\n                            <X className=\"size-4\" />\n                          </Button>\n                        </div>\n                      ) : (\n                        <>\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"font-bold text-lg\">{resource.name}</span>\n                            <Badge className=\"bg-gradient-to-r from-chart-1 to-chart-5 text-white border-0\">\n                              {resource.role}\n                            </Badge>\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              className=\"size-7 opacity-0 group-hover:opacity-100 hover:bg-primary/10 hover:text-primary\"\n                              onClick={() => startEdit(resource.id, resource.name, resource.rate)}\n                            >\n                              <Edit2 className=\"size-3.5\" />\n                            </Button>\n                          </div>\n                          <div className=\"text-sm text-muted-foreground font-medium\">\n                            ${resource.rate}/hr  {assignedTasks.length} tasks  {totalHours}h total\n                          </div>\n                        </>\n                      )}\n                    </div>\n                    <div className=\"text-right\">\n                      <div\n                        className={`text-2xl font-black bg-gradient-to-r ${getUtilizationColor(utilization)} bg-clip-text text-transparent`}\n                      >\n                        {utilization}%\n                      </div>\n                      <div className=\"text-xs text-muted-foreground font-medium\">Utilization</div>\n                    </div>\n                  </div>\n                  <Progress\n                    value={utilization}\n                    className={`h-3 [&>div]:bg-gradient-to-r [&>div]:${getUtilizationColor(utilization)}`}\n                  />\n                </div>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        <Card className=\"gradient-card border-l-4 border-l-chart-2 shadow-lg\">\n          <CardHeader>\n            <CardTitle className=\"text-xl\">Resource Summary</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex justify-between items-center p-3 rounded-lg bg-gradient-to-r from-chart-2/10 to-info/10\">\n              <span className=\"text-muted-foreground font-medium\">Total Resources</span>\n              <span className=\"font-black text-xl bg-gradient-to-r from-chart-2 to-info bg-clip-text text-transparent\">\n                {project.resources.length}\n              </span>\n            </div>\n            <div className=\"flex justify-between items-center p-3 rounded-lg bg-gradient-to-r from-chart-4/10 to-success/10\">\n              <span className=\"text-muted-foreground font-medium\">Avg Utilization</span>\n              <span className=\"font-black text-xl bg-gradient-to-r from-chart-4 to-success bg-clip-text text-transparent\">\n                {Math.round(\n                  project.resources.reduce((sum, r) => {\n                    const tasks = project.tasks.filter((t) => t.resource === r.role)\n                    const hours = tasks.reduce((s, t) => s + t.duration * 8, 0)\n                    return sum + Math.min((hours / (project.duration * 8)) * 100, 100)\n                  }, 0) / project.resources.length,\n                )}\n                %\n              </span>\n            </div>\n            <div className=\"flex justify-between items-center p-3 rounded-lg bg-gradient-to-r from-chart-3/10 to-warning/10\">\n              <span className=\"text-muted-foreground font-medium\">Total Labor Cost</span>\n              <span className=\"font-black text-xl bg-gradient-to-r from-chart-3 to-warning bg-clip-text text-transparent\">\n                ${project.budget.toLocaleString()}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"gradient-card border-l-4 border-l-chart-5 shadow-lg\">\n          <CardHeader>\n            <CardTitle className=\"text-xl\">Role Distribution</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {Array.from(new Set(project.resources.map((r) => r.role))).map((role, index) => {\n                const count = project.resources.filter((r) => r.role === role).length\n                const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n                const color = colors[index % colors.length]\n                return (\n                  <div\n                    key={role}\n                    className={`flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-${color}/10 to-${color}/5 border border-${color}/20`}\n                  >\n                    <span className=\"text-sm font-semibold\">{role}</span>\n                    <Badge className={`bg-gradient-to-r from-${color} to-primary text-white border-0 text-base px-3`}>\n                      {count}\n                    </Badge>\n                  </div>\n                )\n              })}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8255, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/budget-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport type { Project, Task } from \"@/lib/types\"\nimport { DollarSign, TrendingUp, AlertCircle, Edit2, Check, X, PieChart } from \"lucide-react\"\nimport { updateProject } from \"@/lib/storage\"\n\ninterface BudgetViewProps {\n  project: Project\n  onUpdate?: () => void\n}\n\nexport function BudgetView({ project, onUpdate }: BudgetViewProps) {\n  // Calculate comprehensive budget breakdown\n  const laborCost = project.budget\n  const contingency = Math.round(laborCost * 0.15)\n  const overhead = Math.round(laborCost * 0.10) // 10% overhead\n  const totalBudget = laborCost + contingency + overhead\n\n  // Calculate cost by WBS level\n  const costByLevel = project.tasks.reduce((acc, task) => {\n    const level = task.level\n    if (!acc[level]) {\n      acc[level] = { count: 0, cost: 0, tasks: [] }\n    }\n    acc[level].count++\n    acc[level].cost += task.cost\n    acc[level].tasks.push(task)\n    return acc\n  }, {} as Record<number, { count: number; cost: number; tasks: Task[] }>)\n\n  const [editingResource, setEditingResource] = useState<string | null>(null)\n  const [editRate, setEditRate] = useState(0)\n\n  const startEdit = (resourceId: string, rate: number) => {\n    setEditingResource(resourceId)\n    setEditRate(rate)\n  }\n\n  const saveEdit = (resourceId: string) => {\n    const updatedResources = project.resources.map((r) => (r.id === resourceId ? { ...r, rate: editRate } : r))\n    // Recalculate budget\n    const newBudget = project.tasks.reduce((sum, task) => {\n      const resource = updatedResources.find((r) => r.role === task.resource)\n      return sum + (resource ? task.duration * 8 * resource.rate : 0)\n    }, 0)\n    updateProject({ ...project, resources: updatedResources, budget: newBudget })\n    setEditingResource(null)\n    onUpdate?.()\n  }\n\n  const costByPhase = project.tasks\n    .filter((t) => t.level === 1)\n    .map((phase) => ({\n      name: phase.name,\n      cost: project.tasks\n        .filter((t) => t.parentId === phase.id || t.id === phase.id)\n        .reduce((sum, t) => sum + t.cost, 0),\n    }))\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid md:grid-cols-3 gap-6\">\n        <Card className=\"gradient-card border-l-4 border-l-chart-3 shadow-lg hover:shadow-xl transition-all\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Labor Cost</CardTitle>\n            <div className=\"size-10 rounded-xl bg-gradient-to-br from-chart-3 to-warning flex items-center justify-center shadow-lg shadow-chart-3/30\">\n              <DollarSign className=\"size-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-black bg-gradient-to-r from-chart-3 to-warning bg-clip-text text-transparent\">\n              ${laborCost.toLocaleString()}\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-2 font-medium\">Based on resource allocation</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"gradient-card border-l-4 border-l-chart-5 shadow-lg hover:shadow-xl transition-all\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Contingency</CardTitle>\n            <div className=\"size-10 rounded-xl bg-gradient-to-br from-chart-5 to-destructive flex items-center justify-center shadow-lg shadow-chart-5/30\">\n              <AlertCircle className=\"size-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-black bg-gradient-to-r from-chart-5 to-destructive bg-clip-text text-transparent\">\n              ${contingency.toLocaleString()}\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-2 font-medium\">15% buffer for risks</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"gradient-card border-l-4 border-l-primary shadow-lg hover:shadow-xl transition-all\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-semibold\">Total Budget</CardTitle>\n            <div className=\"size-10 rounded-xl gradient-primary flex items-center justify-center shadow-lg shadow-primary/30\">\n              <TrendingUp className=\"size-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-black bg-gradient-to-r from-primary to-chart-1 bg-clip-text text-transparent\">\n              ${totalBudget.toLocaleString()}\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-2 font-medium\">Labor + Contingency + Overhead</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid md:grid-cols-2 gap-6\">\n        <Card className=\"gradient-card border-l-4 border-l-chart-2 shadow-lg\">\n          <CardHeader>\n            <CardTitle className=\"text-xl flex items-center gap-2\">\n              <AlertCircle className=\"size-5 text-chart-2\" />\n              Budget Components\n            </CardTitle>\n            <CardDescription className=\"text-base\">Detailed budget breakdown</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-chart-3/10 to-chart-3/5 border border-chart-3/20\">\n                <span className=\"font-semibold\">Labor Cost</span>\n                <span className=\"font-bold text-lg\">${laborCost.toLocaleString()}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-chart-5/10 to-chart-5/5 border border-chart-5/20\">\n                <span className=\"font-semibold\">Contingency (15%)</span>\n                <span className=\"font-bold text-lg\">${contingency.toLocaleString()}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-chart-4/10 to-chart-4/5 border border-chart-4/20\">\n                <span className=\"font-semibold\">Overhead (10%)</span>\n                <span className=\"font-bold text-lg\">${overhead.toLocaleString()}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-primary/20 to-primary/10 border-2 border-primary/30\">\n                <span className=\"font-bold text-lg\">Total Project Budget</span>\n                <span className=\"font-black text-2xl bg-gradient-to-r from-primary to-chart-1 bg-clip-text text-transparent\">\n                  ${totalBudget.toLocaleString()}\n                </span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"gradient-card border-l-4 border-l-chart-1 shadow-lg\">\n          <CardHeader>\n            <CardTitle className=\"text-xl flex items-center gap-2\">\n              <PieChart className=\"size-5 text-chart-1\" />\n              Cost by WBS Level\n            </CardTitle>\n            <CardDescription className=\"text-base\">Budget distribution by hierarchy level</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {Object.entries(costByLevel)\n                .sort(([a], [b]) => Number(a) - Number(b))\n                .map(([level, data]) => {\n                  const percentage = Math.round((data.cost / laborCost) * 100)\n                  const levelNames = [\"Phase\", \"Task\", \"Subtask\", \"Work Package\"]\n                  const levelName = levelNames[Number(level) - 1] || `Level ${level}`\n                  const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n                  const color = colors[(Number(level) - 1) % colors.length]\n\n                  return (\n                    <div key={level} className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-semibold\">\n                          {levelName} Level ({data.count} items)\n                        </span>\n                        <span className=\"font-bold text-lg\">${data.cost.toLocaleString()} ({percentage}%)</span>\n                      </div>\n                      <div className=\"h-2 bg-muted rounded-full overflow-hidden shadow-inner\">\n                        <div\n                          className={`h-full bg-gradient-to-r from-${color} to-${color}/80 rounded-full shadow-lg transition-all`}\n                          style={{ width: `${percentage}%` }}\n                        />\n                      </div>\n                    </div>\n                  )\n                })}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"gradient-card border-l-4 border-l-chart-1 shadow-lg\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <PieChart className=\"size-5 text-chart-1\" />\n            <CardTitle className=\"text-xl\">Cost Breakdown by Phase</CardTitle>\n          </div>\n          <CardDescription className=\"text-base\">Budget distribution across project phases</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-5\">\n            {costByPhase.map((phase, i) => {\n              const percentage = Math.round((phase.cost / laborCost) * 100)\n              const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n              const color = colors[i % colors.length]\n\n              return (\n                <div key={i} className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"font-semibold text-base\">{phase.name}</span>\n                    <span className={`font-bold text-lg bg-gradient-to-r from-${color} to-primary bg-clip-text text-transparent`}>\n                      ${phase.cost.toLocaleString()} ({percentage}%)\n                    </span>\n                  </div>\n                  <div className=\"h-3 bg-muted rounded-full overflow-hidden shadow-inner\">\n                    <div\n                      className={`h-full bg-gradient-to-r from-${color} to-${color}/80 rounded-full shadow-lg transition-all`}\n                      style={{ width: `${percentage}%` }}\n                    />\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"gradient-card border-l-4 border-l-chart-4 shadow-lg\">\n        <CardHeader>\n          <CardTitle className=\"text-xl\">Resource Cost Breakdown</CardTitle>\n          <CardDescription className=\"text-base\">Labor costs by resource type (click to edit rates)</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {project.resources.map((resource, index) => {\n              const tasks = project.tasks.filter((t) => t.resource === resource.role)\n              const hours = tasks.reduce((sum, t) => sum + t.duration * 8, 0)\n              const cost = hours * resource.rate\n              const isEditing = editingResource === resource.id\n              const colors = [\"chart-1\", \"chart-2\", \"chart-3\", \"chart-4\", \"chart-5\"]\n              const color = colors[index % colors.length]\n\n              return (\n                <div\n                  key={resource.id}\n                  className={`flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-${color}/10 to-${color}/5 border border-${color}/20 hover:border-${color}/40 transition-all group`}\n                >\n                  <div>\n                    <div className=\"font-bold text-lg\">{resource.name}</div>\n                    <div className=\"text-sm text-muted-foreground font-medium\">{resource.role}</div>\n                  </div>\n                  <div className=\"text-right flex items-center gap-3\">\n                    <div>\n                      <div className=\"font-black text-xl bg-gradient-to-r from-${color} to-primary bg-clip-text text-transparent\">\n                        ${cost.toLocaleString()}\n                      </div>\n                      {isEditing ? (\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <Input\n                            type=\"number\"\n                            value={editRate}\n                            onChange={(e) => setEditRate(Number.parseInt(e.target.value) || 0)}\n                            className=\"w-20 h-7 text-xs\"\n                          />\n                          <span className=\"text-xs\">/h</span>\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-6 text-success\"\n                            onClick={() => saveEdit(resource.id)}\n                          >\n                            <Check className=\"size-3\" />\n                          </Button>\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-6 text-destructive\"\n                            onClick={() => setEditingResource(null)}\n                          >\n                            <X className=\"size-3\" />\n                          </Button>\n                        </div>\n                      ) : (\n                        <div className=\"text-sm text-muted-foreground font-medium flex items-center gap-2\">\n                          {hours}h  ${resource.rate}/h\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"size-6 opacity-0 group-hover:opacity-100 hover:bg-primary/10 hover:text-primary\"\n                            onClick={() => startEdit(resource.id, resource.rate)}\n                          >\n                            <Edit2 className=\"size-3\" />\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9206, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/views/ai-insights-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { AlertCircle, TrendingUp, Lightbulb, AlertTriangle, CheckCircle, Sparkles } from \"lucide-react\"\nimport type { Project } from \"@/lib/types\"\n\ninterface AIInsightsViewProps {\n  project: Project\n}\n\nexport function AIInsightsView({ project }: AIInsightsViewProps) {\n  const insights = [\n    {\n      type: \"warning\",\n      icon: AlertTriangle,\n      title: \"Resource Overallocation Detected\",\n      description:\n        \"Backend developers are overallocated by 45 hours. Consider adding an additional resource or extending the timeline.\",\n      priority: \"high\",\n    },\n    {\n      type: \"suggestion\",\n      icon: Lightbulb,\n      title: \"Optimize Testing Phase\",\n      description:\n        \"Add a 3-day testing buffer between Development and Deployment phases to catch integration issues early.\",\n      priority: \"medium\",\n    },\n    {\n      type: \"risk\",\n      icon: AlertCircle,\n      title: \"Critical Path Risk\",\n      description:\n        \"Database setup is on the critical path. Any delay will impact the entire timeline. Consider starting earlier.\",\n      priority: \"high\",\n    },\n    {\n      type: \"success\",\n      icon: CheckCircle,\n      title: \"Budget Alignment\",\n      description: \"Current resource allocation aligns well with typical project budgets for this type of development.\",\n      priority: \"low\",\n    },\n    {\n      type: \"suggestion\",\n      icon: TrendingUp,\n      title: \"Feature Enhancement Opportunity\",\n      description:\n        \"Consider adding an AI recommendation engine feature. It aligns with current market trends and adds value.\",\n      priority: \"medium\",\n    },\n  ]\n\n  const getIconColor = (type: string) => {\n    switch (type) {\n      case \"warning\":\n      case \"risk\":\n        return \"text-destructive\"\n      case \"success\":\n        return \"text-green-500\"\n      case \"suggestion\":\n        return \"text-primary\"\n      default:\n        return \"text-muted-foreground\"\n    }\n  }\n\n  const getPriorityBadge = (priority: string) => {\n    switch (priority) {\n      case \"high\":\n        return <Badge variant=\"destructive\">High Priority</Badge>\n      case \"medium\":\n        return <Badge variant=\"default\">Medium Priority</Badge>\n      case \"low\":\n        return <Badge variant=\"secondary\">Low Priority</Badge>\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>AI-Powered Insights</CardTitle>\n              <CardDescription>Smart recommendations to optimize your project</CardDescription>\n            </div>\n            <Button className=\"gap-2\">\n              <Sparkles className=\"size-4\" />\n              Generate New Insights\n            </Button>\n          </div>\n        </CardHeader>\n      </Card>\n\n      <div className=\"space-y-4\">\n        {insights.map((insight, i) => {\n          const Icon = insight.icon\n          return (\n            <Card key={i}>\n              <CardHeader>\n                <div className=\"flex items-start gap-4\">\n                  <div className={`p-2 rounded-lg bg-muted ${getIconColor(insight.type)}`}>\n                    <Icon className=\"size-5\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <CardTitle className=\"text-lg\">{insight.title}</CardTitle>\n                      {getPriorityBadge(insight.priority)}\n                    </div>\n                    <CardDescription className=\"text-base\">{insight.description}</CardDescription>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex gap-2\">\n                  <Button size=\"sm\" variant=\"default\">\n                    Apply Suggestion\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\">\n                    Dismiss\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Project Health Score</CardTitle>\n          <CardDescription>AI-calculated overall project health</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center gap-8\">\n            <div className=\"flex-1 space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span>Timeline</span>\n                <span className=\"font-medium text-green-500\">85%</span>\n              </div>\n              <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                <div className=\"h-full bg-green-500\" style={{ width: \"85%\" }} />\n              </div>\n            </div>\n            <div className=\"flex-1 space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span>Budget</span>\n                <span className=\"font-medium text-green-500\">92%</span>\n              </div>\n              <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                <div className=\"h-full bg-green-500\" style={{ width: \"92%\" }} />\n              </div>\n            </div>\n            <div className=\"flex-1 space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span>Resources</span>\n                <span className=\"font-medium text-yellow-500\">68%</span>\n              </div>\n              <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                <div className=\"h-full bg-yellow-500\" style={{ width: \"68%\" }} />\n              </div>\n            </div>\n          </div>\n          <div className=\"mt-6 text-center\">\n            <div className=\"text-4xl font-bold\">82%</div>\n            <div className=\"text-sm text-muted-foreground\">Overall Health Score</div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9721, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/components/project/project-tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { LayoutList, BarChart3, Network, Users, DollarSign, Sparkles } from \"lucide-react\"\nimport { WBSView } from \"@/components/project/views/wbs-view\"\nimport { GanttView } from \"@/components/project/views/gantt-view\"\nimport { NetworkDiagramView } from \"@/components/project/views/network-diagram-view\"\nimport { ResourcesView } from \"@/components/project/views/resources-view\"\nimport { BudgetView } from \"@/components/project/views/budget-view\"\nimport { AIInsightsView } from \"@/components/project/views/ai-insights-view\"\nimport type { Project } from \"@/lib/types\"\n\ninterface ProjectTabsProps {\n  project: Project\n  onUpdate?: () => void\n}\n\nexport function ProjectTabs({ project, onUpdate }: ProjectTabsProps) {\n  return (\n    <div className=\"container mx-auto px-4 py-6\">\n      <Tabs defaultValue=\"wbs\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-6 max-w-4xl\">\n          <TabsTrigger value=\"wbs\" className=\"gap-2\">\n            <LayoutList className=\"size-4\" />\n            <span className=\"hidden sm:inline\">WBS</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"gantt\" className=\"gap-2\">\n            <BarChart3 className=\"size-4\" />\n            <span className=\"hidden sm:inline\">Gantt</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"network\" className=\"gap-2\">\n            <Network className=\"size-4\" />\n            <span className=\"hidden sm:inline\">Network</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"resources\" className=\"gap-2\">\n            <Users className=\"size-4\" />\n            <span className=\"hidden sm:inline\">Resources</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"budget\" className=\"gap-2\">\n            <DollarSign className=\"size-4\" />\n            <span className=\"hidden sm:inline\">Budget</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"insights\" className=\"gap-2\">\n            <Sparkles className=\"size-4\" />\n            <span className=\"hidden sm:inline\">AI Insights</span>\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"wbs\" className=\"mt-6\">\n          <WBSView project={project} onUpdate={onUpdate} />\n        </TabsContent>\n\n        <TabsContent value=\"gantt\" className=\"mt-6\">\n          <GanttView project={project} />\n        </TabsContent>\n\n        <TabsContent value=\"network\" className=\"mt-6\">\n          <NetworkDiagramView project={project} />\n        </TabsContent>\n\n        <TabsContent value=\"resources\" className=\"mt-6\">\n          <ResourcesView project={project} />\n        </TabsContent>\n\n        <TabsContent value=\"budget\" className=\"mt-6\">\n          <BudgetView project={project} />\n        </TabsContent>\n\n        <TabsContent value=\"insights\" className=\"mt-6\">\n          <AIInsightsView project={project} />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAiBO,SAAS,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAoB;IACjE,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iIAAI;YAAC,cAAa;YAAM,WAAU;;8BACjC,8OAAC,qIAAQ;oBAAC,WAAU;;sCAClB,8OAAC,wIAAW;4BAAC,OAAM;4BAAM,WAAU;;8CACjC,8OAAC,gOAAU;oCAAC,WAAU;;;;;;8CACtB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,8OAAC,wIAAW;4BAAC,OAAM;4BAAQ,WAAU;;8CACnC,8OAAC,+NAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,8OAAC,wIAAW;4BAAC,OAAM;4BAAU,WAAU;;8CACrC,8OAAC,mNAAO;oCAAC,WAAU;;;;;;8CACnB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,8OAAC,wIAAW;4BAAC,OAAM;4BAAY,WAAU;;8CACvC,8OAAC,6MAAK;oCAAC,WAAU;;;;;;8CACjB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,8OAAC,wIAAW;4BAAC,OAAM;4BAAS,WAAU;;8CACpC,8OAAC,gOAAU;oCAAC,WAAU;;;;;;8CACtB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAErC,8OAAC,wIAAW;4BAAC,OAAM;4BAAW,WAAU;;8CACtC,8OAAC,sNAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;;;;;;;8BAIvC,8OAAC,wIAAW;oBAAC,OAAM;oBAAM,WAAU;8BACjC,cAAA,8OAAC,yJAAO;wBAAC,SAAS;wBAAS,UAAU;;;;;;;;;;;8BAGvC,8OAAC,wIAAW;oBAAC,OAAM;oBAAQ,WAAU;8BACnC,cAAA,8OAAC,6JAAS;wBAAC,SAAS;;;;;;;;;;;8BAGtB,8OAAC,wIAAW;oBAAC,OAAM;oBAAU,WAAU;8BACrC,cAAA,8OAAC,mLAAkB;wBAAC,SAAS;;;;;;;;;;;8BAG/B,8OAAC,wIAAW;oBAAC,OAAM;oBAAY,WAAU;8BACvC,cAAA,8OAAC,qKAAa;wBAAC,SAAS;;;;;;;;;;;8BAG1B,8OAAC,wIAAW;oBAAC,OAAM;oBAAS,WAAU;8BACpC,cAAA,8OAAC,+JAAU;wBAAC,SAAS;;;;;;;;;;;8BAGvB,8OAAC,wIAAW;oBAAC,OAAM;oBAAW,WAAU;8BACtC,cAAA,8OAAC,2KAAc;wBAAC,SAAS;;;;;;;;;;;;;;;;;;;;;;AAKnC"}},
    {"offset": {"line": 10022, "column": 0}, "map": {"version":3,"sources":["file:///Users/me/Documents/NNU/Project%20mangment/project/pm-studio/app/project/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { ProjectHeader } from \"@/components/project/project-header\"\nimport { ProjectTabs } from \"@/components/project/project-tabs\"\nimport { getProjectById } from \"@/lib/storage\"\nimport type { Project } from \"@/lib/types\"\n\nexport default function ProjectPage() {\n  const params = useParams()\n  const router = useRouter()\n  const id = params.id as string\n  const [project, setProject] = useState<Project | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  const loadProject = () => {\n    const loadedProject = getProjectById(id)\n    if (!loadedProject) {\n      router.push(\"/dashboard\")\n      return\n    }\n    setProject(loadedProject)\n    setIsLoading(false)\n  }\n\n  useEffect(() => {\n    loadProject()\n  }, [id, router])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-lg text-muted-foreground\">Loading project...</div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!project) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ProjectHeader project={project} />\n      <ProjectTabs project={project} onUpdate={loadProject} />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,cAAc;QAClB,MAAM,gBAAgB,IAAA,gIAAc,EAAC;QACrC,IAAI,CAAC,eAAe;YAClB,OAAO,IAAI,CAAC;YACZ;QACF;QACA,WAAW;QACX,aAAa;IACf;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;QAAI;KAAO;IAEf,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BAAgC;;;;;;;;;;;;;;;;IAIvD;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4JAAa;gBAAC,SAAS;;;;;;0BACxB,8OAAC,wJAAW;gBAAC,SAAS;gBAAS,UAAU;;;;;;;;;;;;AAG/C"}}]
}